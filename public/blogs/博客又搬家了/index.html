<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preconnect" href="https://fonts.googleapis.com"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC&amp;display=swap" rel="stylesheet"/><meta data-react-helmet="true" name="twitter:description" content="欢迎来到张小伦的网络日志 
		一个记录生活，分享心得的博客"/><meta data-react-helmet="true" name="twitter:title" content="博客又搬家了"/><meta data-react-helmet="true" name="twitter:creator" content="zhanglun1410"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:description" content="欢迎来到张小伦的网络日志 
		一个记录生活，分享心得的博客"/><meta data-react-helmet="true" property="og:title" content="博客又搬家了"/><meta data-react-helmet="true" name="description" content="欢迎来到张小伦的网络日志 
		一个记录生活，分享心得的博客"/><meta name="generator" content="Gatsby 4.13.1"/><style data-href="/styles.7aa89aa35ece76996c80.css" data-identity="gatsby-global-css">.theme-1{--background-color:#fef6e4;--background-color-1:#f3d2c1;--background-color-2:#fffffe;--background-color-3:#f582ae;--button-color:#f582ae;--button-text-color:#001858;--card-backgroud-color:#f3d2c1;--card-background-color:#fef6e4;--card-background-color-1:#001858;--card-heading-color:#001858;--card-headline-color:#fffffe;--card-headline-color-1:#001858;--card-highlight-color:#f582ae;--card-paragraph-color:#172c66;--card-tag-background-color:#fef6e4;--card-tag-text-color:#001858;--form-button-color:#f582ae;--form-button-text-color:#001858;--form-input-color:#f3d2c1;--headline-color:#001858;--highlight-color:#fef6e4;--label-placeholder-color:#001858;--link-color:#f582ae;--links-color:#fef6e4;--main-color:#f3d2c1;--paragraph-color:#172c66;--secondary-color:#8bd3dd;--stroke-color:#001858;--sub-headline-color:#172c66;--tertiary-color:#f582ae}.theme-2{--background-color:#55423d;--background-color-1:#271c19;--background-color-2:#ffc0ad;--background-color-3:#9656a1;--button-color:#ffc0ad;--button-text-color:#271c19;--card-backgroud-color:#fffffe;--card-background-color:#55423d;--card-background-color-1:#ffc0ad;--card-heading-color:#fffffe;--card-headline-color:#271c19;--card-highlight-color:#9656a1;--card-paragraph-color:#fff3ec;--card-paragraph-color-1:#271c19;--card-tag-background-color:#fffffe;--card-tag-text-color:#271c19;--form-button-color:#9656a1;--form-button-text-color:#fffffe;--form-input-color:#fffffe;--headline-color:#fffffe;--headline-color-1:#271c19;--highlight-color:#e78fb3;--label-placeholder-color:#271c19;--link-color:#9656a1;--links-color:#e78fb3;--main-color:#fff3ec;--paragraph-color:#fff3ec;--paragraph-color-1:#271c19;--secondary-color:#ffc0ad;--stroke-color:#140d0b;--sub-headline-color:#fff3ec;--tertiary-color:#9656a1}.theme-3{--background-color:#faeee7;--background-color-1:#fffffe;--background-color-2:#fffffe;--background-color-3:#33272a;--button-color:#ff8ba7;--button-text-color:#33272a;--card-backgroud-color:#faeee7;--card-background-color:#faeee7;--card-background-color-1:#fffffe;--card-heading-color:#33272a;--card-headline-color:#33272a;--card-highlight-color:#33272a;--card-paragraph-color:#594a4e;--card-tag-background-color:#ffc6c7;--card-tag-text-color:#33272a;--form-button-color:#ff8ba7;--form-button-text-color:#33272a;--form-input-color:#faeee7;--headline-color:#33272a;--highlight-color:#ff8ba7;--label-placeholder-color:#33272a;--link-color:#ff8ba7;--links-color:#ff8ba7;--main-color:#fffffe;--paragraph-color:#594a4e;--secondary-color:#ffc6c7;--stroke-color:#33272a;--sub-headline-color:#594a4e;--tertiary-color:#c3f0ca}.theme-4{--background-color:#fffffe;--background-color-1:#e3f6f5;--background-color-2:#e3f6f5;--background-color-3:#bae8e8;--button-color:#ffd803;--button-text-color:#272343;--card-backgroud-color:#fffffe;--card-background-color:#fffffe;--card-background-color-1:#272343;--card-heading-color:#272343;--card-headline-color:#fffffe;--card-headline-color-1:#272343;--card-highlight-color:#bae8e8;--card-paragraph-color:#2d334a;--card-tag-background-color:#bae8e8;--card-tag-text-color:#272343;--form-button-color:#272343;--form-button-text-color:#fffffe;--form-input-color:#fffffe;--headline-color:#272343;--highlight-color:#ffd803;--label--placeholder-color:#272343;--link-color:#272343;--links-color:#ffd803;--main-color:#fffffe;--paragraph-color:#2d334a;--secondary-color:#e3f6f5;--stroke-color:#272343;--sub-headline-color:#2d334a;--tertiary-color:#bae8e8}:root{--inline-code-font:monospace!important;--mono-font:"JetBrains Mono",monospace!important;--content-font-size:16px;--maxWidth-none:"none";--maxWidth-xs:999px;--maxWidth-sm:24rem;--maxWidth-md:28rem;--maxWidth-lg:32rem;--maxWidth-xl:36rem;--maxWidth-2xl:42rem;--maxWidth-3xl:48rem;--maxWidth-4xl:56rem;--maxWidth-5xl:64rem;--maxWidth-full:"100%";--maxWidth-wrapper:var(--maxWidth-2xl);--main-max-width:750px;--spacing-px:"1px";--spacing-0:0;--spacing-1:0.25rem;--spacing-2:0.5rem;--spacing-3:0.75rem;--spacing-4:1rem;--spacing-5:1.25rem;--spacing-6:1.5rem;--spacing-8:2rem;--spacing-10:2.5rem;--spacing-12:3rem;--spacing-16:4rem;--spacing-20:5rem;--spacing-24:6rem;--spacing-32:8rem;--main-spacing:100px;--font-family-sans:"Noto San SC",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-body:var(--font-family-sans);--font-heading:var(--font-family-sans);--fontWeight-normal:400;--fontWeight-medium:500;--fontWeight-semibold:600;--fontWeight-bold:700;--fontWeight-extrabold:800;--fontWeight-black:900;--fontSize-root:10px;--lineHeight-none:1;--lineHeight-tight:1.1;--lineHeight-normal:1.5;--lineHeight-relaxed:1.9;--fontSize-0:0.833rem;--fontSize-1:1rem;--fontSize-2:1.2rem;--fontSize-3:1.44rem;--fontSize-4:1.728rem;--fontSize-5:2.074rem;--fontSize-6:2.488rem;--fontSize-7:2.986rem;--color-primary:#4b5cc4;--color-text:#312520;--color-text-light:#4f5969;--color-heading:#312520;--color-heading-black:#161823;--color-accent:#d1dce5;--header-height:60px;--img-border-color:#313b44;--img-border-radius:8px;--background-color:#fafafa;--background-color-1:#f3d2c1;--background-color-2:#fffffe;--background-color-3:#f582ae;--button-color:#636363;--button-text-color:#fff;--card-backgroud-color:#f3d2c1;--card-background-color:#fef6e4;--card-background-color-1:#001858;--card-heading-color:#001858;--card-headline-color:#fffffe;--card-headline-color-1:#001858;--card-highlight-color:#f582ae;--card-paragraph-color:#172c66;--card-tag-background-color:#636363;--card-tag-text-color:#fff;--form-button-color:#f582ae;--form-button-text-color:#001858;--form-input-color:#f3d2c1;--headline-color:#001858;--highlight-color:#fef6e4;--label--placeholder-color:#001858;--link-color:#f582ae;--links-color:#fef6e4;--main-color:#f3d2c1;--paragraph-color:#172c66;--secondary-color:#8bd3dd;--stroke-color:#001858;--sub-headline-color:#172c66;--tertiary-color:#f582ae}*,:after,:before{box-sizing:border-box}html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-size:var(--fontSize-root);line-height:var(--lineHeight-normal)}body{color:var(--color-text);font-family:var(--font-body);font-size:var(--fontSize-1);margin:0}hr{background:var(--color-accent);border:0;height:1px}h1,h2,h3,h4,h5,h6{font-family:var(--font-heading);letter-spacing:-.025em;line-height:var(--lineHeight-normal);margin-bottom:var(--spacing-6);margin-top:var(--spacing-12)}h2,h3,h4,h5,h6{color:var(--color-heading);font-weight:var(--fontWeight-bold)}h1{color:var(--color-heading-black);font-size:var(--fontSize-6);font-weight:var(--fontWeight-black)}h2{font-size:var(--fontSize-5)}h3{font-size:var(--fontSize-4)}h4{font-size:var(--fontSize-3)}h5{font-size:var(--fontSize-2)}h6{font-size:var(--fontSize-1)}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{color:inherit;text-decoration:none}pre[class*=language-]{border-radius:0;white-space:pre-wrap}code[class*=language-]{font-family:Menlo,Monaco,Consolas,Courier New,monospace;font-size:14px;white-space:pre-wrap}p{--baseline-multiplier:0.179;--x-height-multiplier:0.35;font-size:1.6rem;line-height:var(--lineHeight-relaxed);margin:var(--spacing-0) var(--spacing-0) var(--spacing-8) var(--spacing-0);padding:var(--spacing-0)}ol,ul{margin-bottom:0;margin-top:0}ol li,ul li{padding-left:var(--spacing-0)}ol,ul{margin-bottom:1.5em}li>p{margin-bottom:calc(var(--spacing-8)/2)}li>ul{margin-left:var(--spacing-8);margin-top:calc(var(--spacing-8)/2)}blockquote{border-left:var(--spacing-1) solid var(--color-primary);color:var(--color-text-light);font-size:var(--fontSize-1);font-style:italic;margin-bottom:var(--spacing-8);padding:var(--spacing-5)}.quote{background:#f9f9f9;border-left:2px solid #636363;color:#636363;font-style:italic;margin:0 0 var(--spacing-16) 0;margin-bottom:1.5em;padding:1.5em;transition:.3s}blockquote>:last-child{margin-bottom:var(--spacing-0)}blockquote p{margin-bottom:var(--spacing-3)}blockquote li{margin:0}blockquote>ol,blockquote>ul{list-style-position:inside;padding-left:var(--spacing-4)}table{border:1px solid #e9e9e7;border-collapse:collapse;border-spacing:.25rem;font-size:14px;margin-bottom:var(--spacing-8);width:100%}table td,table th{border-bottom:1px solid #e9e9e7;padding:8px 10px}table thead tr th{background-color:#f7f6f3;text-align:left}p img{border:.5px solid var(--img-border-color);border-radius:var(--img-border-radius);max-width:100%}a{color:var(--color-primary)}a,a:focus,a:hover{text-decoration:none}.global-header{margin-bottom:var(--spacing-12)}.main{background-color:var(--background-color-2);margin:0 auto;max-width:var(--main-max-width);padding:30px var(--main-spacing) 30px;position:relative;width:90%;z-index:1}.main-heading{font-size:var(--fontSize-7);margin:0}.header-link-home{font-family:var(--font-heading);font-size:var(--fontSize-2);font-weight:var(--fontWeight-bold);text-decoration:none}.article-section{margin:0 auto;max-width:var(--main-max-width);position:relative;z-index:1}.article-cover{border:1px solid #f0f0f0;border-radius:var(--img-border-radius);height:380px;margin-bottom:60px;-o-object-fit:cover;object-fit:cover;width:100%}@media screen and (max-width:999px){.article-section,.pagination{max-width:100%;padding:0 20px}}.blog-post{border-bottom:1px solid #1d2b36;line-height:1.9;margin-bottom:10px;padding-bottom:60px;position:relative}.blog-post:before{left:0}.blog-post:after,.blog-post:before{background:#1d2b36;bottom:-2px;content:"";height:3px;position:absolute;width:3px}.blog-post:after{right:0}.blog-post header{border-top:1px solid #1d2b36;margin-top:50px;position:relative}.blog-post header:before{left:0}.blog-post header:after,.blog-post header:before{background:#1d2b36;content:"";height:3px;position:absolute;top:-2px;width:3px}.blog-post header:after{right:0}.blog-post header h1{font-size:36px;font-weight:var(--fontWeight-semibold);line-height:1.4;margin:60px 0}.blog-post header p{font-family:var(--font-heading);font-size:var(--fontSize-2)}.gatsby-highlight{margin-bottom:var(--spacing-8)}@media(max-width:42rem){blockquote{margin-left:var(--spacing-0);padding:var(--spacing-3)}ol,ul{padding-left:14px}}.pagination{margin:0 auto;max-width:var(--main-max-width);padding:50px 0}.link-underline,.pagination .next:hover,.pagination .prev:hover{text-decoration:underline}.link-underline{box-shadow:inset 0 0 0 0 var(--color-primary);margin:0 .25rem;padding:0 .25rem;transition:color .3s ease-in-out,box-shadow .3s ease-in-out}.link-underline:hover{box-shadow:inset 0 -40px 0 0 var(--color-primary);color:#fff}.hover-underline{position:relative}.hover-underline:after{background-color:var(--color-text);bottom:4px;content:"";height:2px;left:0;position:absolute;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transform-origin:bottom right;transform-origin:bottom right;transition:-webkit-transform .25s ease-out;transition:transform .25s ease-out;transition:transform .25s ease-out,-webkit-transform .25s ease-out;width:100%}.hover-underline:hover:after{-webkit-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:bottom left;transform-origin:bottom left}.page-title{color:var(--color-heading);font-size:var(--fontSize-6);margin-bottom:var(--spacing-5);padding-top:50px;text-align:center}:root{--bg-color:#d3dadf;--action-color:#000911}.archive-page{background-color:var(--bg-color);width:100%}.archive-page__container{margin:0 auto;padding-bottom:1px;padding-left:6.4rem;padding-right:6.4rem}.archive-page__post-title{display:flex;font-size:2.4rem;line-height:3.2rem;margin:0}.archive-page__post-excerpt{margin-bottom:3.2rem;position:relative}.archive-page__post-date{color:var(--text-color);font-size:1.4rem}.archive-section{margin-bottom:24vw;margin-top:10vw;position:relative}.archive-section__year{color:#c3cad0;color:var(--text-light-color,#c3cad0);font-size:36vw;font-weight:700;letter-spacing:-.07em;line-height:.2;margin-top:0;min-width:100%;pointer-events:none;position:absolute;text-align:center;-webkit-user-select:none;-ms-user-select:none;user-select:none}.archive-posts{grid-gap:3.2rem;display:grid;font-size:1.6rem;grid-template-columns:repeat(auto-fill,minmax(25.6rem,1fr));list-style-type:none;margin:0;padding:0;position:relative}.archive-posts a{color:var(--action-color);text-decoration:none}.archive-posts a:hover{text-decoration:underline}.archive-date{margin-right:20px}.category-page,.root{min-height:100vh}.category-page{background-color:#a4c9d8}.category-list{grid-gap:10rem;display:grid;font-size:1.8rem;grid-template-columns:repeat(4,1fr);justify-items:center}.category-img{background-color:rgba(0,0,0,.2);border-radius:100%;height:150px;margin-bottom:20px;padding:10px;transition:all .3s ease-in-out;width:150px}.category-img img{width:100%}.category-item{text-align:center;text-decoration:none}.category-item:hover{color:var(--color-text)}.category-item:hover .category-img{background-color:rgba(0,0,0,.35)}.category-page-header{display:grid;justify-items:center;padding:50px 0}.ham{-webkit-tap-highlight-color:transparent;color:#fff;cursor:pointer;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:54px}.hamRotate.active{-webkit-transform:rotate(45deg);transform:rotate(45deg)}.hamRotate180.active{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.line{fill:none;stroke:#333;stroke-width:3;stroke-linecap:round;transition:stroke-dasharray .4s,stroke-dashoffset .4s}.ham.active .line{stroke:#fff}.ham1 .top{stroke-dasharray:40 139}.ham1 .bottom{stroke-dasharray:40 180}.ham1.active .top{stroke-dashoffset:-98px}.ham1.active .bottom{stroke-dashoffset:-138px}.ham2 .bottom,.ham2 .top{stroke-dasharray:40 121}.ham2.active .bottom,.ham2.active .top{stroke-dashoffset:-102px}.ham3 .top{stroke-dasharray:40 130}.ham3 .middle{stroke-dasharray:40 140}.ham3 .bottom{stroke-dasharray:40 205}.ham3.active .top{stroke-dasharray:75 130;stroke-dashoffset:-63px}.ham3.active .middle{stroke-dashoffset:-102px}.ham3.active .bottom{stroke-dasharray:110 205;stroke-dashoffset:-86px}.ham4 .bottom,.ham4 .top{stroke-dasharray:40 121}.ham4.active .bottom,.ham4.active .top{stroke-dashoffset:-68px}.ham5 .bottom,.ham5 .top{stroke-dasharray:40 82}.ham5.active .bottom,.ham5.active .top{stroke-dasharray:14 82;stroke-dashoffset:-72px}.ham6 .top{stroke-dasharray:40 172}.ham6 .middle{stroke-dasharray:40 111}.ham6 .bottom{stroke-dasharray:40 172}.ham6.active .top{stroke-dashoffset:-132px}.ham6.active .middle{stroke-dashoffset:-71px}.ham6.active .bottom{stroke-dashoffset:-132px}.ham7 .top{stroke-dasharray:40 82}.ham7 .middle{stroke-dasharray:40 111}.ham7 .bottom{stroke-dasharray:40 161}.ham7.active .top{stroke-dasharray:17 82;stroke-dashoffset:-62px}.ham7.active .middle{stroke-dashoffset:23px}.ham7.active .bottom{stroke-dashoffset:-83px}.ham8 .top{stroke-dasharray:40 160}.ham8 .middle{stroke-dasharray:40 142;transition:-webkit-transform .4s;transition:transform .4s;transition:transform .4s,-webkit-transform .4s}.ham8 .bottom,.ham8 .middle{-webkit-transform-origin:50%;transform-origin:50%}.ham8 .bottom{stroke-dasharray:40 85;transition:stroke-dashoffset .4s,-webkit-transform .4s;transition:transform .4s,stroke-dashoffset .4s;transition:transform .4s,stroke-dashoffset .4s,-webkit-transform .4s}.ham8.active .top{stroke-dashoffset:-64px}.ham8.active .middle{stroke-dashoffset:-20px;-webkit-transform:rotate(90deg);transform:rotate(90deg)}.ham8.active .bottom{stroke-dashoffset:-64px}.index-module--menu--aNCkU{position:fixed;right:0;top:0;z-index:100}.index-module--menu-button--Iv9-4{position:fixed;right:0;top:0;z-index:102}.index-module--menu-main--dqZT6{background-color:#000;bottom:0;padding:100px;position:fixed;right:0;top:0;-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0);transition:all .4s;width:520px;z-index:101}.index-module--menu-main--dqZT6.index-module--open--LEqU-{-webkit-transform:translateZ(0);transform:translateZ(0)}.index-module--menu-title--n-nNm{color:#fff;font-weight:var(--fontWeight-semibold);margin-top:30px}.index-module--title-link--T5U9M{color:#fff;font-size:var(--fontSize-7)}.index-module--nav--nqC-X{align-items:flex-start;display:flex;flex-direction:column;margin-top:40px}.index-module--nav-item--8jKuC{color:#fff;font-size:22px;font-weight:500;height:var(--header-height);letter-spacing:1px;line-height:var(--header-height);margin:0;text-decoration:none;transition:all .3s}.index-module--nav-item--8jKuC:hover{-webkit-filter:invert(.5);filter:invert(.5);text-decoration:line-through}.index-module--nav-item--8jKuC.index-module--theme-1--jQ2fg:hover,.index-module--nav-item--8jKuC.index-module--theme-2--7nodg:hover,.index-module--nav-item--8jKuC.index-module--theme-3--pka-p:hover,.index-module--nav-item--8jKuC.index-module--theme-4--L3lP0:hover,.index-module--nav-item--8jKuC.index-module--theme-5--zFBiY:hover,.index-module--nav-item--8jKuC.index-module--theme-6--t9Ipa:hover{text-decoration:underline}.index-module--sidemenu-nav-item--3tmSg:hover{-webkit-transform:translate3d(14px,0,0);transform:translate3d(14px,0,0)}@media (max-width:1024px){.index-module--fullscreen-bubble-in-menu--fe12F .index-module--main-menu--owoSn{box-sizing:border-box;right:-100vw;transition:none!important;width:100%}.index-module--fullscreen-bubble-in-menu--fe12F .index-module--main-menu--owoSn:before{background:#edbb1c;border-radius:50%;content:"";height:0;position:fixed;right:0;top:0;transition:all .7s;width:0}.index-module--fullscreen-bubble-in-menu--fe12F .index-module--main-menu--owoSn.index-module--visible-menu--i0GXs:before{height:300vh;right:-150vh;top:-150vh;transition:all .7s;width:300vh}.index-module--fullscreen-bubble-in-menu--fe12F .index-module--ba-hamburger-menu--ykJDi .index-module--main-menu--owoSn{background-color:transparent!important}.index-module--fullscreen-bubble-in-menu--fe12F .index-module--ba-hamburger-menu--ykJDi .index-module--main-menu--owoSn>*{opacity:0;transition:.3s}.index-module--fullscreen-bubble-in-menu--fe12F .index-module--ba-hamburger-menu--ykJDi .index-module--main-menu--owoSn.index-module--visible-menu--i0GXs>*{opacity:1;transition:.3s .5s}}.index-module--container--MsrZ9{align-items:center;display:grid;justify-content:center;padding:3.75rem;text-align:center}.index-module--inner--Qy-hx{align-items:center;display:grid;gap:.75rem;justify-content:center;padding-bottom:5rem;padding-top:11.25rem;position:relative;width:100%}.index-module--title--k4zZ7{font-size:9.5rem;font-weight:600;margin:0}.index-module--subTitle--Sf0CJ{font-size:2rem;font-weight:600;margin:3.75rem 0 0}.index-module--main--husmE{align-items:center;display:grid;height:100vh;justify-content:center;margin:0 auto}.index-module--profile--01Kcu{grid-gap:40px;display:grid;grid-template-rows:1fr 1fr}.index-module--headline--7zfcQ{grid-gap:32px;align-items:center;display:grid;grid-template-columns:120px 1fr}.index-module--title--YQ4NF{color:var(--color-heading-black);font-size:7rem;margin:0;padding:0;text-align:center}.index-module--subTitle--aYKXU{font-size:2rem}.index-module--avatar--y2x3q{border-radius:50%;height:120px;width:120px}.index-module--menu--x9lUY{display:grid;font-size:1.8rem;grid-auto-flow:column;justify-items:center}.index-module--menuItem--3eiAT div{margin-left:.6rem;opacity:0}.index-module--menuItem--3eiAT:hover div{opacity:1}.article-list{list-style-type:none;margin:0;padding:0}.article-list-item{border-bottom:1px solid #e2e2e2}.article-list-item p{font-size:var(--content-font-size);margin-bottom:var(--spacing-0);text-align:center}.article-item-title{color:var(--color-heading-black);display:block;font-size:1.8rem;font-weight:var(--fontWeight-semibold);padding:1.4rem 0}.article-item-category{align-items:center;display:flex;font-size:1.4rem;font-weight:var(--fontWeight-normal);margin-bottom:.5vh}.article-item-category:before{background-color:currentColor;border-radius:1rem;content:"";display:block;height:.5rem;margin-right:.25rem;-webkit-transform:translateY(-1px);transform:translateY(-1px);width:.5rem}.article-list-item section{margin:50px 0 20px}.article-list-item footer{padding:40px 0;text-align:center}.article-list-item .read-more{background-color:var(--button-color);background-color:transparent;border:2px solid #636363;cursor:pointer;display:inline-block;font-size:13px;font-weight:var(--fontWeight-bold);height:50px;line-height:44px;outline:none;position:relative;text-decoration:none;transition:.25s ease-in-out;-ms-user-select:none;user-select:none;-webkit-user-select:none;width:190px}.article-list-item .read-more,.article-list-item .read-more:link{color:var(--button-text-color)}.article-list{margin:0 auto;max-width:var(--main-max-width);width:100%}.article-list-item .read-more:after{background-color:var(--button-color);content:"";height:100%;left:7px;position:absolute;top:7px;transition:.2s;width:100%;z-index:-1}.article-list-item .read-more:hover:after{left:0;top:0}.article-aside{-ms-overflow-style:none;height:100%;left:0;line-height:1.2;margin:60px 0;overflow-y:auto;padding:0 10px 0 20px;position:fixed;scrollbar-width:none;top:0;width:320px}.article-item-header{display:flex;justify-content:space-between}.article-list-item:hover .article-item__text{text-decoration:underline}.article-list-item:hover .article-item-header__arrow{opacity:1;-webkit-transform:scale(.8);transform:scale(.8)}.article-item-header__arrow{background-color:var(--color-heading-black);border-radius:50%;color:#fff;display:block;font-size:0;opacity:0;padding:4px;-webkit-transform:scale(.6);transform:scale(.6);transition:all .15s ease-in-out}.article-item-header__arrow svg{-webkit-transform:rotate(-135deg);transform:rotate(-135deg)}@media screen and (max-width:999px){.article-aside{position:static}}.article-aside__item{margin-bottom:var(--spacing-10)}.aside-toc{box-orient:vertical;box-direction:normal;display:flex;flex-direction:column;gap:6px;list-style-type:none;margin:6px 0 0;padding:0}.aside-toc li{margin:0;padding:2px 0}.aside-toc a{-webkit-margin-after:8px;color:grey;color:var(--theme-text-header);display:block;font-family:var(--font-mono);font-size:14px;font-size:1.4rem;font-weight:700;line-height:1.2;margin-block-end:8px}.aside-toc a:hover{text-decoration:underline}.aside-toc a.visible{color:#000}.aside-toc a:hover{color:#1d2b36}.aside-item__title{-webkit-margin-after:var(--spacing-6);color:#312520;font-size:1.4rem;line-height:1.6;margin-block-end:var(--spacing-6)}.aside-item__content .category-item,.aside-item__content time{font-size:14px;font-weight:var(--fontWeight-semibold);line-height:1.7}.aside-item__content .category-item{color:#000;display:block;text-align:left}.aside-item__content .tag-item{font-size:14px;font-weight:var(--fontWeight-semibold);line-height:1.7}.aside-item__content .tag-item:before{content:"#"}.anchor.before{margin-top:-24px;top:50%}blockquote{color:#999;font-weight:400}.title{font-size:calc(var(--content-font-size)*2.5)}.desc{font-size:calc(var(--content-font-size)*1.2)}.content{font-size:1.4rem}.content h2{border-top:1px solid #f0f0f0;font-size:25px;margin:80px 0 0;padding:40px 0 50px;position:relative}.content h2:before{left:0}.content h2:after,.content h2:before{background:#93a1b0;content:"";height:3px;position:absolute;top:-2px;width:3px}.content h2:after{right:0}.article-main{padding-top:var(--header-height)}.article-list li{height:100%;margin:0}.article-card{border-radius:.8rem;height:100%;margin:0 2vmin;overflow:hidden;padding-right:calc(54.54546vh - 9.20455rem - 7.90909vmin);position:relative;width:0}.article-card:hover .article-card__cover{-webkit-transform:scale(1.1);transform:scale(1.1)}.article-card__cover{overflow:hidden;-webkit-transform:scale(1);transform:scale(1);transition:-webkit-transform .4s cubic-bezier(.23,1,.32,1);transition:transform .4s cubic-bezier(.23,1,.32,1);transition:transform .4s cubic-bezier(.23,1,.32,1),-webkit-transform .4s cubic-bezier(.23,1,.32,1);will-change:transform}.article-card__cover,.article-card__cover:after{height:100%;left:0;position:absolute;top:0;width:100%}.article-card__cover:after{background-image:linear-gradient(180deg,transparent,rgba(0,0,0,.3) 67%);content:""}.article-card__cover img{height:100%;-o-object-fit:cover;object-fit:cover;width:100%}.article-card__body{color:#fff;display:flex;flex-direction:column;height:100%;justify-content:flex-end;left:0;padding:2.5vmin;position:absolute;top:0;width:100%}.article-card__title{color:#fff;font-size:3.4vmin;line-height:1.4;margin:3vmin 0}.article-card__title.hover-underline:after{background-color:#fff}.article-card__categories{margin-bottom:1vmin}.article-card__category{color:#fff;font-size:14px}.article-card__tag{display:block;font-size:14px;font-weight:var(--fontWeight-semibold);line-height:1.7}.article-card__tag:before{content:"#"}@media screen and (max-width:768px){.article-card{padding-right:calc(100vw - 4rem)}.article-card__cover img{max-height:none;max-width:100%}.article-card__title{font-size:8vmin;margin:4vmin 0}.article-card__body time,.article-card__category,.article-card__tag{font-size:4vmin}}.index-module--circle--E91Mj{border-color:var(--color-heading-black);border-radius:50%;border-style:solid;border-width:1px;display:inline-block;font-size:0;padding:4px;transition:all .15s ease-in-out}.index-module--dark--aAIf4{background-color:var(--color-heading-black);color:#fff}.index-module--light--x7OKG{background-color:#fff;color:var(--color-heading-black)}.index-module--light--x7OKG:hover{background-color:var(--color-heading-black);color:#fff}.index-module--pagination--iWu7S{align-items:center;display:flex;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;justify-content:space-between}.index-module--paginationItem--ZgXus{align-items:center;color:var(--color-heading-black);display:flex;justify-content:space-between}.index-module--paginationItem--ZgXus:hover{text-decoration:underline}.index-module--paginationItem--ZgXus:hover .index-module--paginationItemPrev--WtmXw:after{-webkit-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:right;transform-origin:right}.index-module--paginationItem--ZgXus:hover .index-module--paginationItemNext--nbZSQ:after{-webkit-transform:scaleX(1);transform:scaleX(1);-webkit-transform-origin:left;transform-origin:left}.index-module--paginationItemNext--nbZSQ:after,.index-module--paginationItemPrev--WtmXw:after{background-color:currentColor;bottom:-2px;content:"";display:block;height:1px;left:0;position:absolute;-webkit-transform:scaleX(0);transform:scaleX(0);-webkit-transform-origin:right;transform-origin:right;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;width:100%}.index-module--paginationItemPrev--WtmXw{font-size:1.4rem;line-height:1.031;margin-left:1rem;position:relative}.index-module--paginationItemNext--nbZSQ{font-size:1.4rem;line-height:1.031;margin-right:1rem;position:relative}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="alternate" type="application/rss+xml" title="张小伦的网络日志" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=25643e3cbe7be23b6c1bdad497608e85" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=25643e3cbe7be23b6c1bdad497608e85"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=25643e3cbe7be23b6c1bdad497608e85"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=25643e3cbe7be23b6c1bdad497608e85"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=25643e3cbe7be23b6c1bdad497608e85"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=25643e3cbe7be23b6c1bdad497608e85"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=25643e3cbe7be23b6c1bdad497608e85"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=25643e3cbe7be23b6c1bdad497608e85"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=25643e3cbe7be23b6c1bdad497608e85"/><title data-react-helmet="true">博客又搬家了 | 张小伦的网络日志</title><link as="script" rel="preload" href="/webpack-runtime-adf1335a44885cfac931.js"/><link as="script" rel="preload" href="/framework-4b7b24ae718e4140a055.js"/><link as="script" rel="preload" href="/app-a99b6c2ab16d3879fc0c.js"/><link as="script" rel="preload" href="/commons-904b92826443395b7905.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-tsx-0fc1c644d51a3ff081f8.js"/><link as="fetch" rel="preload" href="/page-data/blogs/博客又搬家了/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2841359383.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="global-wrapper" data-is-root-path="false"><div class="index-module--menu--aNCkU"><div class="index-module--menu-button--Iv9-4" role="button" aria-hidden="true"><svg class="ham hamRotate ham4 " viewBox="0 0 100 100" width="80"><path class="line top" d="m 70,33 h -40 c 0,0 -8.5,-0.149796 -8.5,8.5 0,8.649796 8.5,8.5 8.5,8.5 h 20 v -20"></path><path class="line middle" d="m 70,50 h -40"></path><path class="line bottom" d="m 30,67 h 40 c 0,0 8.5,0.149796 8.5,-8.5 0,-8.649796 -8.5,-8.5 -8.5,-8.5 h -20 v 20"></path></svg></div><div class="index-module--menu-main--dqZT6 "><div class="index-module--menu-title--n-nNm"><a class="index-module--title-link--T5U9M" href="/">张小伦的网络日志</a></div><nav class="index-module--nav--nqC-X"><a class="index-module--nav-item--8jKuC theme-1" href="/">首页</a><a class="index-module--nav-item--8jKuC theme-2" href="/blogs">博文</a><a class="index-module--nav-item--8jKuC theme-3" href="/categories">分类</a><a class="index-module--nav-item--8jKuC theme-4" href="/archives">归档</a><a class="index-module--nav-item--8jKuC theme-5" href="/labs">实验室</a><a class="index-module--nav-item--8jKuC theme-6" href="/about">关于我</a></nav></div></div><section><section class="article-section"><aside class="article-aside"><div class="article-aside__item"><div class="aside-item__title">Published</div><div class="aside-item__content"><time>2021-08-19</time></div></div><div class="article-aside__item"><div class="aside-item__title">Category</div><div class="aside-item__content"><a class="category-item" href="/categories/杂七杂八">杂七杂八</a></div></div><div class="article-aside__item"><div class="aside-item__title">Tags</div><div class="aside-item__content"><div class="tag-item">Gatsby</div><div class="tag-item">Notion</div></div></div><div class="article-aside__item"><div class="aside-item__title">Content</div><div class="aside-item__content"><div class="aside-toc"><a href="#Notion-和-Gatsby">Notion 和 Gatsby</a><a href="#Notion">Notion</a><a href="#Gatsby">Gatsby</a><a href="#重新定义博客工作流">重新定义博客工作流</a><a href="#连接Gatsby和Notion">连接Gatsby和Notion</a><a href="#01-使用Gatsby创建网站">01 使用Gatsby创建网站</a><a href="#02-创建Notion-数据库">02 创建Notion 数据库</a><a href="#03-创建API-Intergation">03 创建API Intergation</a><a href="#04-关联数据库">04 关联数据库</a><a href="#05-使用插件连接-Gatsby-和-Notion">05 使用插件连接 Gatsby 和 Notion</a><a href="#06-使用-GraphQL-Schema-Resolver-兼容数据可选">06 使用 GraphQL Schema Resolver 兼容数据（可选）</a><a href="#07-将Notion导出项目目录通过-source-file-system-加载">07 将Notion导出项目目录，通过 source file system 加载</a><a href="#自动部署的实现">自动部署的实现</a><a href="#其他">其他</a><a href="#参考">参考</a></div></div></div></aside><article class="blog-post" itemscope="" itemType="http://schema.org/Article"><header><h1 itemProp="headline">博客又搬家了</h1></header><img class="article-cover" alt="https://images.unsplash.com/photo-1506792006437-256b665541e2?ixlib=rb-1.2.1&amp;q=85&amp;fm=jpg&amp;crop=entropy&amp;cs=srgb" src="https://images.unsplash.com/photo-1506792006437-256b665541e2?ixlib=rb-1.2.1&amp;q=85&amp;fm=jpg&amp;crop=entropy&amp;cs=srgb"/><section itemProp="articleBody" class="content"><p class="para">不知不觉，从14年到现在，自己的博客已经维护了8年了。虽然文章写的不多，质量也参差不齐，但是热情还是在的。</p>
<p class="para">之前因为Hexo构建速度慢的问题，我将构建工具迁移到了Hugo生态。到目前为止，运行了小一年。但是本质上来说，除了更换了主题之外，其他并无太多差别。之所以说没有太多差别，原因在于Hexo和Hugo。它们都是静态网页生成器，使用Markdown管理内容，在编译阶段，将内容的信息提取之后，利用模板引擎输出网页。在我看来，这就像吃饭的时候，使用竹筷子还是木筷子一样。</p>
<p class="para">这看起来也挺好，但是对我而言还是有几个不满意的地方：</p>
<ul>
<li>
<p class="para">内容创作不连贯。使用git管理博客依赖环境配置，无法随时随地写文章。而我平时喜欢使用笔记软件整理资料，写好之后需要转入git仓库，存在着一种割裂感。</p>
</li>
<li>
<p class="para">博客定制性差。想自定义必须学习其数据格式和对应的模板语言，而学习的收益太低</p>
</li>
</ul>
<p class="para">有没有一种方式，可以实现随时随地写文章，随时随地发布呢？答案是：有！那就是<strong>Notion</strong>和<strong>Gatsby</strong>。</p>
<h2 class="heading subtitle heading" id="Notion-和-Gatsby" style="position:relative;"><a href="#Notion-%E5%92%8C-Gatsby" aria-label="Notion 和 Gatsby permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Notion 和 Gatsby</h2>
<h3 class="heading" id="Notion" style="position:relative;"><a href="#Notion" aria-label="Notion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Notion</h3>
<p class="para">Notion这款工具我已经用了一段时间了。对我来说，是目前使用最舒服的笔记工具了。简单的界面，强大的功能，多平台兼容。同时Notion 提供了开发API，而这就是我最需要的。</p>
<p class="para">将Notion的API和Github Actions 结合，把Notion中的内容转换成博客，以实现随时书写，随时发布的能力。</p>
<h3 class="heading" id="Gatsby" style="position:relative;"><a href="#Gatsby" aria-label="Gatsby permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Gatsby</h3>
<p class="para">Gatsby.js 起初只是一个基于 React 开发的一个框架，用于帮助开发者构建快速的网站或者 apps。通过 GraphQL 处理数据来源，然后输出作为网站的数据，再通过 HTML、CSS、React 将数据展示出来。现在衍生出来一个围绕 Gatsby 的构建，预览和部署网站的云平台。下图是Gatbsby的工作原理</p>
<p class="para"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/390d1c4b8d3cc6c7c330576ae78bf713/60b3a/eb55a3e89e03e681.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 64.36170212765958%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBElEQVQ4y11Ti27bMAz0/39duwfWFdnaJmlT52FbkvWgROkG0nawjQAh+0SRpyPVxcyYfMacCm4zYZgJggVimJDhiUGl6vfgCeMaW7jqOviMKWSNz1zRSYJdP+P1GvDtaPB0crg5gg0ZP09WC9iY8XKZ8ePDKnYcgmK9TXjcj3g6WYyeNGnXWoVzMyZjQSkhZ4JgtTXEGBGT/DegNWQiEGWIlcK6l2JErYxcCmqt6JgZ+8M7XvcHBUrOCCGglOWgsVbxViumySiWUkSMAcwFm0nMmrCilIJIGTYQvGhpAz4uo2o0OQ/jI1wgXCenMcfzgMknuLiciVQgxORW3VYhc0MqFU2qtQWThuzOHoch4jQlnAyhN2lhtKgA4oqQ+c60E33kOtIhqTinpaq4dPZ98OhNxMVG9Cbg6tJ936esZ2RVWYRhrQ2Us4pdmHUcJHmpDXOICDEhEWkDxGcfULhpnDiviXjTUGj+fnnDw5fv8CHcqaeUQERrR4u6mGDS/f/t3hRhmPMiqjaIGcM4LuOyauVDxOy9iq56F4ZzTidBMGXIa8KNrqx21ez5ZHRQKRfV6HCb8XZxui8HRdvdp8Wv3sIE0kRbju5v2jYWfSkPe4OzTaql+P4W8Pzp9CWIXR3hcW/w9Wj0uYq1f7q8XkXesKeiLjMo15F3vOCs2BYn3+JbkS3PH4mr9JcvuQLNAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="eb55a3e89e03e681"
        title="eb55a3e89e03e681"
        src="/static/390d1c4b8d3cc6c7c330576ae78bf713/1d69c/eb55a3e89e03e681.png"
        srcset="/static/390d1c4b8d3cc6c7c330576ae78bf713/4dcb9/eb55a3e89e03e681.png 188w,
/static/390d1c4b8d3cc6c7c330576ae78bf713/5ff7e/eb55a3e89e03e681.png 375w,
/static/390d1c4b8d3cc6c7c330576ae78bf713/1d69c/eb55a3e89e03e681.png 750w,
/static/390d1c4b8d3cc6c7c330576ae78bf713/78797/eb55a3e89e03e681.png 1125w,
/static/390d1c4b8d3cc6c7c330576ae78bf713/60b3a/eb55a3e89e03e681.png 1179w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<h2 class="heading subtitle heading" id="重新定义博客工作流" style="position:relative;"><a href="#%E9%87%8D%E6%96%B0%E5%AE%9A%E4%B9%89%E5%8D%9A%E5%AE%A2%E5%B7%A5%E4%BD%9C%E6%B5%81" aria-label="重新定义博客工作流 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>重新定义博客工作流</h2>
<p class="para">现在博客创建和发布的流程如下</p>
<p class="para"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/96475e5f93be2c0fef68b1dcb3234932/7bf07/a457a9a8d7d5363c.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 55.319148936170215%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzklEQVQoz0VT2ZKbMBD0/39T3vO6L6mkyl5g7fIBAd23BJ2aAW9ETUmipVFPt3RqrYFiXVdQ27YNKSXEGOGc/Q5rLbz3HM45WGuOuUMIgdfnnHGiRI/HA0opjOMIIQSDMQcIO2OSLw7lBXxwyCnDeAXpFix6hrALTFRMgg46EaNhGHC/39F1HW63G5TSKGuCyxbDbcB5OPNYOwVrHGY1wRWLy3DBJCb4alFK2RMSw2mamC41Kp+AUjO0V3y6DhLaS/6HDUg1wkTNGDE3QSGXzBJwQh8Cn0DJaq1cMoGkmzEaxux6LcvCVSipIBZx4IYJEM4aUhJgRaVkh0EkA8W7vYe0iSQhraWU3ybyt21s7Km2FU9NSRuwrai1MUNyjpw0FMTSGjaODCSMkpsDJ6bEcme4AT864OMJhAa0WuB9QK4JOig2YNYTa0gul1zY5b9qhLSCg9alnHYNUSOuT4WfZw9vHSqLG5BbhE0W3VeH/tojlIBFztBKYxIv/Ln8xufXJ/pbj5d8oLV6XBs9Yn38wiauwNwjJ7rQHqVlPpmcJBdt1CitsG4he57baGCChg2ay2WGVDIrePRvl9+vJcTAEak/tNtfy66bdf9fEO35B0JMT+6G9QK9AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="a457a9a8d7d5363c"
        title="a457a9a8d7d5363c"
        src="/static/96475e5f93be2c0fef68b1dcb3234932/1d69c/a457a9a8d7d5363c.png"
        srcset="/static/96475e5f93be2c0fef68b1dcb3234932/4dcb9/a457a9a8d7d5363c.png 188w,
/static/96475e5f93be2c0fef68b1dcb3234932/5ff7e/a457a9a8d7d5363c.png 375w,
/static/96475e5f93be2c0fef68b1dcb3234932/1d69c/a457a9a8d7d5363c.png 750w,
/static/96475e5f93be2c0fef68b1dcb3234932/78797/a457a9a8d7d5363c.png 1125w,
/static/96475e5f93be2c0fef68b1dcb3234932/7bf07/a457a9a8d7d5363c.png 1128w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p class="para">而结合Notion API之后，发布的流程变为：</p>
<p class="para"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/98c95fbf4ba90546583cdfb2c09cc308/5f652/a5b25383d42aed53.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 51.59574468085106%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXElEQVQoz6VSi2rDMAzM//9bWGFspdCQZKzO04/YcR5OmhtSCcsGG4wZhCXbOp9OisZxRFmW2LYN67rifr//y6K+73G9XjnYQb8DH8/mecY8PWwaJxChaZrY6E1ETpqmkFLy5U9rB3e9he4llGvYyLeDQecMlmVBRCB5njO6MQZN08B7j2EYeHfOwVrLzGiproXyEsYbPJ+f0egGbrKolMCyrIjo8eVyQdu2zDKOYwZWSuF0OkFrjbqukWUZxE3gJt7RDRrS1ngrMhivmKGxBmEOD4ZCCP6d2JCexJIaRSBVVfE9aU0aS91Ce4nGVDgnL6hNBTt2aHWNEAIiKoUSiB2BHJtx1I7jDdBWQfkGpRJ4eo2RlykkxzesVDLpRCUTux1g7+hx3/1h8HDewvoOzncwTqPrDVzvPptSFAWD7Ym/jQ0lsYWFNQvh4dMZjw0BJknyp+HdtqO/fRnsD6jDBVcT5z9KAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="a5b25383d42aed53"
        title="a5b25383d42aed53"
        src="/static/98c95fbf4ba90546583cdfb2c09cc308/1d69c/a5b25383d42aed53.png"
        srcset="/static/98c95fbf4ba90546583cdfb2c09cc308/4dcb9/a5b25383d42aed53.png 188w,
/static/98c95fbf4ba90546583cdfb2c09cc308/5ff7e/a5b25383d42aed53.png 375w,
/static/98c95fbf4ba90546583cdfb2c09cc308/1d69c/a5b25383d42aed53.png 750w,
/static/98c95fbf4ba90546583cdfb2c09cc308/78797/a5b25383d42aed53.png 1125w,
/static/98c95fbf4ba90546583cdfb2c09cc308/5f652/a5b25383d42aed53.png 1302w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<h2 class="heading subtitle heading" id="连接Gatsby和Notion" style="position:relative;"><a href="#%E8%BF%9E%E6%8E%A5Gatsby%E5%92%8CNotion" aria-label="连接Gatsby和Notion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>连接Gatsby和Notion</h2>
<h3 class="heading" id="01-使用Gatsby创建网站" style="position:relative;"><a href="#01-%E4%BD%BF%E7%94%A8Gatsby%E5%88%9B%E5%BB%BA%E7%BD%91%E7%AB%99" aria-label="01 使用Gatsby创建网站 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>01 使用Gatsby创建网站</h3>
<p class="para">如果是第一次使用，建议先通读一次<a href="https://www.gatsbyjs.com/docs/tutorial/" class="link-underline">官方文档</a>， 然后选择 <a href="https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog/" class="link-underline">gatsby-starter-blog</a> 这个模板开始搭建自己的博客。具体的搭建细节，我就不在这里赘述了。能看到这篇文章的人应该都能搞定的把？</p>
<h3 class="heading" id="02-创建Notion-数据库" style="position:relative;"><a href="#02-%E5%88%9B%E5%BB%BANotion-%E6%95%B0%E6%8D%AE%E5%BA%93" aria-label="02 创建Notion 数据库 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>02 创建Notion 数据库</h3>
<p class="para">在自己的workspace中创建新建一个数据库类型的Page。视图类型选择Table会更加直观。下图是我的database的截图：</p>
<p class="para"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/a5b65dac435680399830cfe743a57995/c5394/26cedee27e109502.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 40.95744680851064%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRUlEQVQoz3VS2W4DIQzk/7+pX9HtNqnyUjXKAclesIs5DFPBJlGqtpaMJSwPM2ME2Rnj0MEYAz1NGIYe0zjCe48SOedH/hfPHaHUGZu2QdO84mO7QfvWoG2bCnwHfAzmjJTSr4qc0FHE3gQIM8+w1v7JgJkRmZGYkctguYsRzhFCCFWFK0oy470jvOw1xKwH9N0VRIQYYwUpWeADOUwnBXIeswugmOA4wYeA8r7VCtaom+T1FEwXKHmElBLG6NVLrYu+CrQ/njBah8/LCGkcrsQYzQxPDmpS6ExXgYr0lDPE1B9xOHxBKVWXcvemxLIs2G13lflzxLgy1P1XzeflCVoGdNcL+r6HlGc4524CMrzzUAdVa/GZzIBI88MarSWMVjfAlYjgYGHtUj0sQ3c2pcmJQWTBHGvfLwbsV69LUnBw8ef3+gZcDm4KI0x+HgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="26cedee27e109502"
        title="26cedee27e109502"
        src="/static/a5b65dac435680399830cfe743a57995/1d69c/26cedee27e109502.png"
        srcset="/static/a5b65dac435680399830cfe743a57995/4dcb9/26cedee27e109502.png 188w,
/static/a5b65dac435680399830cfe743a57995/5ff7e/26cedee27e109502.png 375w,
/static/a5b65dac435680399830cfe743a57995/1d69c/26cedee27e109502.png 750w,
/static/a5b65dac435680399830cfe743a57995/78797/26cedee27e109502.png 1125w,
/static/a5b65dac435680399830cfe743a57995/aa440/26cedee27e109502.png 1500w,
/static/a5b65dac435680399830cfe743a57995/c5394/26cedee27e109502.png 1535w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p class="para">你可以按需设置自己需要的字段，也可以参考我的。</p>
<ul>
<li>
<p class="para">title: 文章标题</p>
</li>
<li>
<p class="para">categorise: 文章分类</p>
<ul>
<li>
<p class="para">域 业务领域</p>
</li>
<li>
<p class="para">术 解决方案</p>
</li>
<li>
<p class="para">技 技术研究</p>
</li>
<li>
<p class="para">阵 技术应用</p>
</li>
<li>
<p class="para">法 手段方法</p>
</li>
<li>
<p class="para">理 理论学习</p>
</li>
<li>
<p class="para">器 工具使用</p>
</li>
<li>
<p class="para">杂 杂七杂八</p>
</li>
</ul>
</li>
<li>
<p class="para">tags：文章标签</p>
</li>
<li>
<p class="para">date：发布时间</p>
</li>
<li>
<p class="para">status: 文章状态</p>
<ul>
<li>
<p class="para">working: 未完成</p>
</li>
<li>
<p class="para">publish: 已发布</p>
</li>
<li>
<p class="para">draft: 草稿</p>
</li>
</ul>
</li>
</ul>
<h3 class="heading" id="03-创建API-Intergation" style="position:relative;"><a href="#03-%E5%88%9B%E5%BB%BAAPI-Intergation" aria-label="03 创建API Intergation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>03 创建API Intergation</h3>
<p class="para">首先，前往 <a href="https://www.notion.so/my-integrations" class="link-underline">Notion 开发平台</a>创建自己的API Intergation，拿到整个流程中最为关键的secret，具体步骤可以参考<a href="https://developers.notion.com/docs/getting-started#getting-started" class="link-underline">这里</a>。</p>
<p class="para"><img src="/9922e967372e985a09454f2ff7ef0442/1f5a00eb368a1275.gif" alt=""></p>
<h3 class="heading" id="04-关联数据库" style="position:relative;"><a href="#04-%E5%85%B3%E8%81%94%E6%95%B0%E6%8D%AE%E5%BA%93" aria-label="04 关联数据库 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>04 关联数据库</h3>
<p class="para">当Intergation创建完毕时，还需要将其与我们的目标database关联上。如下图所示，在share中找到</p>
<p class="para"><img src="/6e3694fe5689e9e9c607d3025267fd83/a67eb58c664caa4f.gif" alt=""></p>
<p class="para">关联完毕之后，就可以通过 secret 和 database id 来实现对数据库的操作了。</p>
<h3 class="heading" id="05-使用插件连接-Gatsby-和-Notion" style="position:relative;"><a href="#05-%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6%E8%BF%9E%E6%8E%A5-Gatsby-%E5%92%8C-Notion" aria-label="05 使用插件连接 Gatsby 和 Notion permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>05 使用插件连接 Gatsby 和 Notion</h3>
<p class="para">Gastby 的工作原理在前文已经介绍过了。我们可以选择我们喜欢的数据来源，通过插件，将数据同步至 GraphQL 数据层，之后的事情交给GatsBy就行。</p>
<p class="para">你可以自己写代码调用Notion API，也可以使用gatsby提供的插件。我选用目前排名比较靠前的 <a href="https://github.com/orlowdev/gatsby-source-notion-api" class="link-underline">https://github.com/orlowdev/gatsby-source-notion-api</a>。虽然作者说还在开发中，但是试用之后发现能够满足我的需求，我就不再自己花时间折腾了。</p>
<p class="para">接入的具体步骤如下，在依赖安装完毕之后，修改 <code>gatsby.config.js</code> 中的 <code>plugins</code></p>
<deckgo-highlight-code language="javascript" theme="one-dark" line-numbers="true"  >
          <code slot="code">plugins: [
    ...
    // 本地markdown文件，之前的文章
    {
      resolve: `gatsby-source-filesystem`,
      options: {
        path: `${__dirname}/content/blog`,
        name: `blog`,
      },
    },
    {
      resolve: `gatsby-source-notion-api`,
      options: {
        token: `${INTEGRATION_TOKEN}`,
        databaseId: `${DATABASE_ID}`,
        propsToFrontmatter: true,
        lowerTitleLevel: true,
      },
    },
    ...
  ],</code>
        </deckgo-highlight-code>
<p class="para">我保留了之前写的 markdown 博客，放在 content/blog 目录中，新增了 notion api 的插件。这样一来，以前的文章不受影响，新写的文章都在 notion 中。部署时，两个数据源的内容一起部署。</p>
<p class="para">插件接入后，可以通过 <code>allNotion</code> 条件进行查询，这种方式可以查询到来自Notion的数据</p>
<deckgo-highlight-code language="graphql" theme="one-dark" line-numbers="true"  >
          <code slot="code">query {
	allNotion {
		edges {
			node {
				id
				parent
				children
				internal
				title
				properties {
					My_Prop_1
					My_Prop_2
				}
				archived
				createdAt
				updatedAt
				markdown
				raw
			}
		}
	}
}</code>
        </deckgo-highlight-code>
<p class="para">如果本地content/blog中有历史文章，可以使用 <code>allMarkdownRemark</code> 查询，他会包含所有的数据内容。</p>
<deckgo-highlight-code language="graphql" theme="one-dark" line-numbers="true"  >
          <code slot="code">query {
	allMarkdownRemark {
		edges {
			node {
				frontmatter {
					title
				}
				html
			}
		}
	}
}</code>
        </deckgo-highlight-code>
<h3 class="heading" id="06-使用-GraphQL-Schema-Resolver-兼容数据可选" style="position:relative;"><a href="#06-%E4%BD%BF%E7%94%A8-GraphQL-Schema-Resolver-%E5%85%BC%E5%AE%B9%E6%95%B0%E6%8D%AE%E5%8F%AF%E9%80%89" aria-label="06 使用 GraphQL Schema Resolver 兼容数据可选 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>06 使用 GraphQL Schema Resolver 兼容数据（可选）</h3>
<p class="para">通常Hugo(Hexo)中定义的tags和categories都是字符串数组。而Notion的database中我将tags和categories定义为Select类型的属性，保存的值对象，Notion 插件返回的 frontmatter中的tags和categories都是包含了id、color和name的对象数组。</p>
<p class="para">GraphQL的类型定义中，没有类似“Any”的类型，而内置的 ScalarType 和 ObjectType 又不能union，解决方案是使用<code>resolver</code>处理返回的值，将tags处理为一个字符串数组，categories处理成一个字符串。</p>
<deckgo-highlight-code language="javascript" theme="one-dark" line-numbers="true"  >
          <code slot="code">schema.buildObjectType({
	...
	tags: {
    type: &quot;[String]&quot;,
    resolve(source) {
      return source.tags.map((t) =&gt; t.name || t);
    } 
  },
  categories: {
    type: &quot;String&quot;,
    resolve(source) {
      return source.categories;
    }
  },
  ...
})</code>
        </deckgo-highlight-code>
<p class="para">最后在查询时返回的数据格式如下：</p>
<p class="para"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 376px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/ba7bcd5a9d3d3247cde5479754027218/d38a6/b964b3845ce8b0b8.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 81.91489361702128%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACg0lEQVQ4y2VT2XLbMAz0/39RH9uZ3k7ipK5dH0psWbdF8aZEymm2Q8pW4+QBAgkNlgtgMek6i6wWmK5z/Fjn+LpIsYprNJRDSIX4kKCzDqbtgrWdDTberYXphrPpLCb+0FmLpGS4X2b4tsrRmBbGdpBKI6tKdM7BWBuSL4DtqUfb9zBCo21tAGvbDpP2/FLvHGxOYeYJ2Oct2OwAdheD3e5BZzH4MgObxWC/U4ioRPMlAr3ZQWYUnMuR9eRCXZsWsuKQJQPflJBpA1UwqCMffE4htiU0UzDCQEQVZExCLmX8GtC6PlCWBxLYkI9r0Lt4sJs92P0BbJ4G4Na5ofRzyR6o69zY34n/VMc6AHpTXEMkBIpIaGmguYYWOvhL4y9tem0jQz/BbRShIQSnvsfp+YTTy3Pwfd/D9T36Uw/bu/cTfgMWGPoJ74sGUVpjuT9ifaixORBsE4LIW0rwlFPscoqGCTDGURTVWKZ5BRYY+gNXLf7ENaarHPOE4MN9jO+bAjsisMwaTLcFMqqgWgPCObJjBffyF8a0geUVw4sOrW9uwaC3JcSvBHpTQM0TqEUKsztCPR3DVP2k2SINJnxc6qs2TF43WNUCIq4h9nXwfsohiUjIhEA3MkzaA3tFeEk1Db0GHOs3HWROwVc52EMCvshApzuwhwPEYxWYeSHzVRHE7f/LuIbU+rrkkaHpoGsRmHjzQuaLdGBSC6iSDfGzyP2GaCJRJ1XIvRK2l44H9tvhX6e3+8CMfFoHYfut8Mzpz11gNgg9Cauoc/Z+yseajEH/qqYKmsrQK38P7H2skdBMn/1wN9a+1aFD9PgIpcwg3LBaZ/Pr5c6CvsSs/e+de7cp/wAOAr4iT9nBLgAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="b964b3845ce8b0b8"
        title="b964b3845ce8b0b8"
        src="/static/ba7bcd5a9d3d3247cde5479754027218/d38a6/b964b3845ce8b0b8.png"
        srcset="/static/ba7bcd5a9d3d3247cde5479754027218/4dcb9/b964b3845ce8b0b8.png 188w,
/static/ba7bcd5a9d3d3247cde5479754027218/5ff7e/b964b3845ce8b0b8.png 375w,
/static/ba7bcd5a9d3d3247cde5479754027218/d38a6/b964b3845ce8b0b8.png 376w"
        sizes="(max-width: 376px) 100vw, 376px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p class="para">OK，到目前为止，我们已经成功将Gatsby和Notion联系在一起。Notion的内容可以作为Gastby的数据源，输出在网站中，同时现有markdown的也能够无缝迁移。随写随发的目标，我们已经完成了一大半。</p>
<h3 class="heading" id="07-将Notion导出项目目录通过-source-file-system-加载" style="position:relative;"><a href="#07-%E5%B0%86Notion%E5%AF%BC%E5%87%BA%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E9%80%9A%E8%BF%87-source-file-system-%E5%8A%A0%E8%BD%BD" aria-label="07 将Notion导出项目目录通过 source file system 加载 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>07 将Notion导出项目目录，通过 source file system 加载</h3>
<p class="para">使用了一段时间后，发现 gatsby-notion-api 有几个不太好用的地方（毕竟只是作者的实验性项目）：</p>
<ul>
<li>
<p class="para">无法转换Table</p>
</li>
<li>
<p class="para">串行请求页面导致构建时间比较长。</p>
</li>
<li>
<p class="para">无法缓存，导致每次都是全量构建</p>
</li>
</ul>
<p class="para">于是想自己写一个，使用 <a href="https://www.npmjs.com/package/notion-client" class="link-underline"><strong>notion-client</strong></a> 提供开箱即用的API调用，使用 <a href="https://github.com/souvikinator/notion-to-md" class="link-underline"><strong>notion-to-md</strong></a> 将页面转换成markdown 文件。不幸的是，Gatsby在 build 的时候总是出现莫名奇妙的错误。</p>
<p class="para"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/84e78f5006fdb9e043f78c7e94981770/3c492/ea31a6dda92a6a18.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 143.61702127659575%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAAsTAAALEwEAmpwYAAADxElEQVRIx21W0XLbNhDkRzSJRAIEQJAACJCUZLm25fFLJmk/oG0yk7T//xvbuYPAULYfdo4EqeXtYe+g6u9Y42f8hL/CDgddo5c1mqaGEA2klAyl1Iq2lfyMnwsBuUYBKQWqZXQ4hAGTswiuR287ODcgpYQYRzjnIIRgtG17SyjFG1TzsiCmhGmeMc0TxjgipYi7uzscDgecTifEGDFNE7quu2YtUNf7TCwzaI0+VnnvYDsDrRTGMcBaA2M0rO2YoO/7FVprJuQsmwYNo0Zd12vGFclSrcRu9wnn8xldZ9aHJLHUMRNlyVmeXLPNJcllqI7HI5Rq15RXKYxM+npTmKRpNh+WK6p5nlge1S2EwLJD8BiGnms3DMMNaSFs6uKGLHclPBwW6FbgsCxwzqPvLZNZ3m0Ha+0bwrLTVEOqX1FF99XxeOAXDoeEx8cTUhqZsPiwkP2KcmMT+dY2JI+23bkOIVh0nV6LT7UtZO8Rbmt3I7mVki1Bvtvvd2jb8vJW6i3he2T0u+p0OnLqVLPT8Qit1aYT5I1swnsyhfhVAs6QFsi4T0+PWJaZjU0kxhheJ4MXUnq3WU293Zhss+p8voNWAp3ReHl5AdmISLOFRjY72ee1H1+DstvXDaplWXhi0AZcLhfuYaoH1bJ8neK2YwhlYGyvRSNQkZEd+85imhLIRpQlGT1PnDwYKFu6pkjZ07PynECl4RpeLk94eLjH+e7EuDw9MoJ3PMbcMHDnBO9Bg4Tuh76Hdw6e1zw3ANWbylJZ51Arzfhtt8eHfb3iYy3wsRH4QLGgyRCv5Ofy0KYMGl+jxufQ4ks0fP01GXy5xj8miz/nfhM7vh6MhmzVjfG5hp8Xh/+eE77f9/h5SfjxlPDzeca/zwt+PEZ8uw/4/lBiwrd7j39+H+GNgmxvO0kKiUqoFjZYGG9hQw/jPDof4KYJxo/YK4NamRx1iR1M10G9IRSoOqOwTAPSaLFMHss8YZ4S5inCu4H9mWFgtIZWbY5a3wyOYqHKGIUYB4xjf40Ez7ahac676B188GytchS8HbwtWqVQ0XRJaUCMfcZoEaPDvMzcMeRN8mVM2W804clOhfS14TlDGlsxWoyjxRgsQugwjtlnZGKKZGgyMp05pYf3+/3aTbvdju+vhDk7ks0IPROWfi5dQh2TTaxZPk0o21u+Xo1NhFPqOUNrNYSQPMLKcNXXDaA1ivlAk6vk7cS5StaIkaQ5Bp0pJItBGVAm1ywIRFyGb5FdQCchE/pr31LP3p7LcvVYQT7Uxc3fk+2m/A/4/y0jGFurHQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="ea31a6dda92a6a18"
        title="ea31a6dda92a6a18"
        src="/static/84e78f5006fdb9e043f78c7e94981770/1d69c/ea31a6dda92a6a18.png"
        srcset="/static/84e78f5006fdb9e043f78c7e94981770/4dcb9/ea31a6dda92a6a18.png 188w,
/static/84e78f5006fdb9e043f78c7e94981770/5ff7e/ea31a6dda92a6a18.png 375w,
/static/84e78f5006fdb9e043f78c7e94981770/1d69c/ea31a6dda92a6a18.png 750w,
/static/84e78f5006fdb9e043f78c7e94981770/78797/ea31a6dda92a6a18.png 1125w,
/static/84e78f5006fdb9e043f78c7e94981770/3c492/ea31a6dda92a6a18.png 1300w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p class="para"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/a9c1eafc214a89958596e5bb3111f295/4352a/1f39fbd8b14e8176.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 135.63829787234042%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsTAAALEwEAmpwYAAADbElEQVRIx4VV2ZLbNhDkRyQVEQAvECdBUqJWq5Xtx9hVOaqczdoP+f8f6dQMRYqS7eShCwRZbMx0zwyyL0nhnyTwtRMYtYKtFIqyQFWVqKqKUZblDUUBKSWkFFBKoigUyrJYkQ19Qh89grMwxsB7j5Q6HA57DMMA5xwT1XV9JS2YSArBpELmKJRiYkLWdR28d4gxoOsinLO8juOAlBKT0hpjvBLOPyqlmFhJOR9wXTNjWtQ1pSaQkoFS+ZrGkvI29SWSbZp3KVNETVNDiBz7/cjabQnv9PsPwjVlSrVpGk6BfljEVqxLwe++F+G3uEZIhGRGCJ4NoL21hhHCfNhCWqwO3yDYHLkGlPV9gjGa0yV3iZjISFtyfEv4mP4CpQoIoSDlknJdcWR937PDREanblPepv5oFJNKBSUkMoqICK0xXHtk0KPLP4pw1ZVMUQVULpFRvWndoKlrTNPEpizOPUbyvf2c8mwKgQubUiTdSEd63rq8iP1Iek9YQEjFyPqUYNqWiT58eI9xHFdj6DDaa63/X0OlIEnDLkbuFNLufD6z00ROeyKiUqIft2ltMbegmjWcTQnwznE/T9MBx+PETlOU/M177mN6JtABtFL09J5grb0RXi4veP/ugufTE87PJ7y7vOB8PiF4Nx9ExR4CIh3gHZy1DDrIcSAebdteu6hAVmsNUdXIywo/5eKKnNefhZqRy9uzUMjV0r83LJpmT67Gl6PD57HB62TxemjndTL4+2Dw9uTxdgp4O3q8Tg5fjxYnW+GXXPAcXNpvacHs4Bu8vgT8Phl8fon44yniz+eEvy4jfps8Pg4Gn0aHT6PFr73Bx9Rgb2bCxZCFjAlVWaANBtq1MMFCO482BNiuQ9kayLqBYmheSZpKa9QPnbOUUEZaDL1FF1uk5DH0PVKKDC6fuoamEmoabkmR75Dn+QY77HY7jpL2WVUV6CIV8YzgNWJ0oClEoBJaphCVFo26eW7KuzpcwISRCK+kIbRMmPrurtYItHfe8Uh7dHd1mQmDwTBY9L3FOFikzqDvO76cEkfaY7/fX6+IaiVj7er7AcEa0uUUIw2IhttQ63ptvUdQdAvmy61ai3ol7DrHsLZFoxseZzM0dKu5Ewi0J5IZ9arhtsAzuuXmvvU8tYnodqt9OwO3RUxk5OytuHP8CwQk8y8UIMnDAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="1f39fbd8b14e8176"
        title="1f39fbd8b14e8176"
        src="/static/a9c1eafc214a89958596e5bb3111f295/1d69c/1f39fbd8b14e8176.png"
        srcset="/static/a9c1eafc214a89958596e5bb3111f295/4dcb9/1f39fbd8b14e8176.png 188w,
/static/a9c1eafc214a89958596e5bb3111f295/5ff7e/1f39fbd8b14e8176.png 375w,
/static/a9c1eafc214a89958596e5bb3111f295/1d69c/1f39fbd8b14e8176.png 750w,
/static/a9c1eafc214a89958596e5bb3111f295/78797/1f39fbd8b14e8176.png 1125w,
/static/a9c1eafc214a89958596e5bb3111f295/4352a/1f39fbd8b14e8176.png 1364w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p class="para">经过百般对比和调试，翻阅Gatsby的文档。最后发现可能是在CreateNode的时候传入的参数有问题，但是调试是在是太麻烦了。随着耐心的逐渐消失，我决定换个思路。构建之前，将内容下载到本地，再通过 source file system 来处理。后续还方便做缓存。具体代码在<a href="https://github.com/zhanglun/zhanglun.github.io/tree/master/scripts/notion" class="link-underline">这里</a>。</p>
<p class="para"><strong>2022年5月21日更新</strong></p>
<p class="para">下载到本地的方式成功运行了一两周，接下来的时间里，Github在执行Action时，不停地遇到如下图所示的错误。</p>
<p class="para"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9c26f1a01a38586905846eefda3ee7e4/71c1d/24c0968f07052424.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 95.2127659574468%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACaUlEQVQ4y4VUyXbaQBDkXwIW2mfXgpCQjVlMEu855ZyT/V7+/1J53QJZcrB9qNfTaKjp6prpiR9J2HyJ1eUOq8st2vUeDcWrHerVNa42B15f737w96yoUVYtpM4hjoiFxWwe48JPMAlihSg1mIUSFxFBwYsVpqHgOMxnoeB8nmhM/YQJvCDlOCJMhcGf2zu8Pj/j5fHxiAe8PDz0+esT4YnXf3894/fNgUlOOJFOglgjSjQO7Qp311cdNjvcbva4397gfnfAz/UW22WD7XLF2DctmqLqiUYVhonGPJLwohSh0AhShUBY+KlFKDMEabcmubNAYErwU14PiU5gyfNQQioN6xyMddCuRLFoYbIKfihAe+hgBq1jBTLzPVlPSB9joaCtgzIOyi0gbclmDcmoPZQHXxGS5ERoGJdB2ww6qyBNOSAiUoN5KDD1ov+MGBL3khOhYJyDywukKuM/c0U9oebfzhkxqpA2+pFiQpKcCHOUpcfxDOE58LXxj5K1y5BIwyTUv/DYQ14nuu/pZ6QjycoYaJuzKfQcT9LpQALto5cx7N+HLkepgtAWQjlIUzBi4UayqTVe8Hkfe5dTqaGMhTQ5bFEzyGk6bHx1ugO+rDAWkgnZGJn1Mt+DWuB98EoGPRSIUglpHITuCMmAkwmJdDyiKKd4zu3+LftHFwN20SISFkHSSewq72bdt4vwDV7EF5xA+Xja0IDNKjTthofoevudQYOVh+t6D2VLdpxAZlHkqlPDeTB4hhMRCeTSoNQZimyBqqg5LhcN6qpFVdZYFDWqskGZVxxzW0ImCiJW0MIiCVOE8xiRH+MfRt5WPkd7NDUAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="24c0968f07052424"
        title="24c0968f07052424"
        src="/static/9c26f1a01a38586905846eefda3ee7e4/1d69c/24c0968f07052424.png"
        srcset="/static/9c26f1a01a38586905846eefda3ee7e4/4dcb9/24c0968f07052424.png 188w,
/static/9c26f1a01a38586905846eefda3ee7e4/5ff7e/24c0968f07052424.png 375w,
/static/9c26f1a01a38586905846eefda3ee7e4/1d69c/24c0968f07052424.png 750w,
/static/9c26f1a01a38586905846eefda3ee7e4/78797/24c0968f07052424.png 1125w,
/static/9c26f1a01a38586905846eefda3ee7e4/aa440/24c0968f07052424.png 1500w,
/static/9c26f1a01a38586905846eefda3ee7e4/71c1d/24c0968f07052424.png 1536w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p class="para">调试了很久，最后发现是依赖的 <a href="https://www.gatsbyjs.com/plugins/gatsby-remark-images-anywhere/" class="link-underline">gatsby-remark-images-anywhere</a> 所导致。这个插件会做的事情是将远程图片下载到static目录，同时修改文章中图片的引用。我也不想深究背后的问题，自己写一个脚本不是更方便么？</p>
<h2 class="heading subtitle heading" id="自动部署的实现" style="position:relative;"><a href="#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E7%9A%84%E5%AE%9E%E7%8E%B0" aria-label="自动部署的实现 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>自动部署的实现</h2>
<p class="para">使用类Hugo的静态网站生成器时，自动部署的关键点在于push操作能够触发配置的CI流程。而改用Notion之后，如何触发构建和部署呢？目前我想到了两个方式：手动触发构建和定时任务。后者相比之下更加“自动化”。</p>
<p class="para">其实有一种取巧地方式：通过Chrome插件在Notion的Web页面上插入一个按钮。这个按钮点击时调用webhook触发Action。不过暂时不打算折腾这些。毕竟还有一些待完成的工作要做。考虑到我已经实现了“随时写”的目标，“随时发”倒也没有那么迫切了。所以我决定先采用定时发布的方式来解决部署的问题。</p>
<p class="para">我在Github Action的市场中找到一个已经做好的Action帮助我实现博客的编译和github page的部署，这里是它的<a href="https://github.com/enriikke/gatsby-gh-pages-action" class="link-underline">仓库地址</a> 。按照它的教程很快就能定制出自己的Action。我在此基础上增加了一个定时任务，每天零时的时候执行一次，暂且先当作是实现了“自动化部署”吧。</p>
<deckgo-highlight-code language="yaml" theme="one-dark" line-numbers="true"  >
          <code slot="code">name: Gatsby Publish
on:
  schedule:
    - cron: &quot;0 0 * * *&quot;
  workflow_dispatch:
  push:
    branches:
      - mast

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - uses: enriikke/gatsby-gh-pages-action@v2
        with:
          access-token: ${{ secrets.gatsbyDeploy }}
          deploy-branch: gh-pages
          deploy-repo: gatsby-starter-blog</code>
        </deckgo-highlight-code>
<h2 class="heading subtitle heading" id="其他" style="position:relative;"><a href="#%E5%85%B6%E4%BB%96" aria-label="其他 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>其他</h2>
<p class="para">现在将Notion作为CMS的想法已经基本实现。接下来地主要工作是定制化设计和开发博客主题。目前设计的第一版已经完成了。</p>
<p class="para"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/ac2a14ea463d2cf90a49c1ab8e918c7a/0d292/b73141e3ac029d53.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 144.14893617021275%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEMElEQVRIx6VVa0wcVRS+lVZoYYmuFCsWQsWSYugj1tQ/Gh8RrTFtAAW6JRYoJUVrTUiM2kT/aAiJivIImkUI0EazVki7S1WMNSpYa5vqYktjY6KNAjssuzszO7Oz7OzO7mfOhSHSWAt4kpP7Oue7Z875zh2G/5B4PI5oNIZozECM1JhVPRqFHo3xkdZGPA4jnuBz1tbRiaa2bjR39ODt9m40vWeHve84vv/xAtRgANBVRDUJekhERBWhyT4E/QIUv4CgzwM1MAXVL0AS/oTkmwJbszYPbIUVLD0PSbdtRGrWFqRnb8OdW4uwq/IQ7N19cLpccDqdcDmd6O8fgOOT43CedOLU4CAGXS585nKh3+HA2TNnwLIL7scqay5u2XAfsjY/gswNW5FTsAObNm9H/pYdePTJYhSXVcL2bA1qag/i6TIbntmzD+/3fIrOoyfw4dEBdB8bQEtHL7748luwzNxCrMzYCGvBQ8gseBCWdflYY81BiiUDGdn5yM7fhlRrFu6+92E8UV6PopIqPF5SjfpX3sGrjR/gtSY73ny3B6832dHvOg22NmcTVt1RiLTc7Uhedw/2Hz6Cjxz96Or9GF19DrTbe9HU3I7WLgec37jhOn0Og1/9gM+/PovKQ2+gqPxFFFe9hJ0Vh9HW6QAbvTiGn9y/4OfRi7gweglqSFtQaVEM4Pz5c7g8dgl6JLzg7Oq4gLErf+DX367i8pXfMT4pgF1LlUQiDl2PIhLRIUkyREmGooYQVFQEJBmaFubnhmGQ9QJfw4iBzczMIBKJcKU5Geq6jkAgAJ/Ph+npaXi9XkzPqSRJCAaDnKPEQ9PX9GfkHI1GudJ89mYz2gTfUxQFmqYhFostiMj0Mf0J9F8BCYgiIKE9iopAad/sIJovGZBaaXLSg++Gh+F2u3mU5vmSAE1RtTAvREAklSDKQRhGfPGfTEklOeU8gd07H8Pe8lLYykpQvacU+ypKYCsrRfHup7C/porTiaIkkOsChsOzPGtpfguMMSQnMaxks7o6icGSfBNWMIb1WbfD4/Fw20UBtra2cEBLugXpaavxQOF6WG9NR5olDSkpNyMv7y4IgrB4wMbGRg5ImsUYTlYkYVcem99LTU3FxMTEjQHNHA4NDWGvzYaDdQfwQl0tXq6vxZHna/Fc3QHUVFehoaGBU+mGOfwnbcyIQ5oGVZuBooURCoU4uU2OLomHNJISqCiKvN3M82USe7YrKCKKjOd3rlOWRWweZTwOjyBgeK5T6PPN6JbVKfRkeX1+eIQpCFNe+AIiIro+f+GiAPmzpOs8b6RUTVmS+EhrWZbnny9Kx6JzSMZkoKoq/H4/B6Q52S25KNeKybXE/ymKyTV6tUdGRnhR6DyxXEASWVEgeKfx1/gEJiY9vED0r1lyUSh/qqLwV5ryRoWQ5SBfEydJr1eUvwHfnd2m4C3ZbQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="b73141e3ac029d53"
        title="b73141e3ac029d53"
        src="/static/ac2a14ea463d2cf90a49c1ab8e918c7a/1d69c/b73141e3ac029d53.png"
        srcset="/static/ac2a14ea463d2cf90a49c1ab8e918c7a/4dcb9/b73141e3ac029d53.png 188w,
/static/ac2a14ea463d2cf90a49c1ab8e918c7a/5ff7e/b73141e3ac029d53.png 375w,
/static/ac2a14ea463d2cf90a49c1ab8e918c7a/1d69c/b73141e3ac029d53.png 750w,
/static/ac2a14ea463d2cf90a49c1ab8e918c7a/78797/b73141e3ac029d53.png 1125w,
/static/ac2a14ea463d2cf90a49c1ab8e918c7a/aa440/b73141e3ac029d53.png 1500w,
/static/ac2a14ea463d2cf90a49c1ab8e918c7a/0d292/b73141e3ac029d53.png 1620w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p class="para"><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/e352024a15f187c6da3c35997fb7f00c/6a5c3/c18738a69359bbce.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 84.04255319148936%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQ4y5WTbWwUVRSGJ0b5R/ADkhpTi4AgllJMttSSiCSIpEVU0OKmCSpiW35QUDHGWCMmtlaFUkpC4481tmiR2DQQI2gwTRqa+lFjSIMbyvZru+1S2+12293uztw7s/OYuZuNGyNhvcnJvHPuPc89Z84ZbSEWQ9d1hBBEozFCoRnm5udJL1NKpBTqaZoSUwr0RBxdT5CIx5HCUD7njBQCbV/VQTaVutn2wmuUvVRF2Z5K3K+/Re3Hp+jq7mE6OEooOMLU+DB/BYYI+gcZGx7A7/My5vMSGPQSuHENX38fgWEf2lrXFjTtbrR7VrIoJ5/FD6xjSe567lu5kTXFpVTWvENjcwsnmk9z8lQLDZ81UtdwnLb2b2k/18nXZzs4+00HHk8b3d09aEVP7uCOJbncu2ojea4yluYVsCyvgNy8FeQXunh881O4SjazrfRZyt172fl8Oduf2U39yVZaWi/weWsnnq/O03T6DD9cvoL2cEEx2l05LHqwiDtz1rF0eSGPbNjE8jUbWPFoEasfe4L7H8pnbUkZu6uP4q6upaLqXWpqm9j3Rj0vH/yQ6rc/4dWaj2g99z1axSuVuLbuYsvOCoqfLufTZg9T0yECEzcJjAcZHRvHNzTKkH+CyZkok9MRbk6FCYUjHG38kv1HGjj03nEq36yjveMSGlksm+xW0rLQnJExDEOZo6VpIqRkdibEfCSsYL9e6eLn7p8wkzDS9wth3+8kbVuNWjrWMAS6YaA5L1JKtemYjc1cZI7vLl4iODFGLG5w+MBhWpoaiURNPO+76TpTR9JGzWU6zmEYmcA01LIsbBv8/gCzsxFVyuWuXq55byh93dvLwEC/0pmJ3BJomqY6PG/o6FKm/hbL2TeUDkUWiC4klBa3AxpC4NQSji9Q399L2/CfWJbg6o9fMPjbBSZD05S4Cnlu13YMU6pqsgAmiegJjnn76By5jmUKJr09hEf/YCo8Q83eF6n/4IjK/rbAzJLnYrHUBUDCMNFFyi+EgZ20s/+GqimZM+h0yDGn/7atZNJOaefyrIBpUAr2j7Yz/f8nQ/4VeCv9X8C/Af+Lip0BKyxrAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="c18738a69359bbce"
        title="c18738a69359bbce"
        src="/static/e352024a15f187c6da3c35997fb7f00c/1d69c/c18738a69359bbce.png"
        srcset="/static/e352024a15f187c6da3c35997fb7f00c/4dcb9/c18738a69359bbce.png 188w,
/static/e352024a15f187c6da3c35997fb7f00c/5ff7e/c18738a69359bbce.png 375w,
/static/e352024a15f187c6da3c35997fb7f00c/1d69c/c18738a69359bbce.png 750w,
/static/e352024a15f187c6da3c35997fb7f00c/78797/c18738a69359bbce.png 1125w,
/static/e352024a15f187c6da3c35997fb7f00c/aa440/c18738a69359bbce.png 1500w,
/static/e352024a15f187c6da3c35997fb7f00c/6a5c3/c18738a69359bbce.png 1646w"
        sizes="(max-width: 750px) 100vw, 750px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p class="para">代码已经开发了一部分，维护在<a href="https://github.com/zhanglun/gatsby-starter-blog" class="link-underline">zhanglun/gatsby-starter-blog</a>。等完工之后，将博客迁移到这个方案。期间再研究研究，看看是否能找到更好的自动化方案。在此期间就继续慢慢感受Notion的魅力吧。</p>
<blockquote class="quote">
<p class="para">2022-04-23 更新：<br>
网站整体的风格已经变了，欢迎访问</p>
</blockquote>
<h2 class="heading subtitle heading" id="参考" style="position:relative;"><a href="#%E5%8F%82%E8%80%83" aria-label="参考 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>参考</h2>
<ul>
<li>
<p class="para"><a href="https://arnaudvalensi.github.io/blog/making-a-blog-using-notion-gatsby-and-github-pages/" class="link-underline">Making a Blog Using Notion, Gatsby, and Github Pages</a></p>
</li>
<li>
<p class="para"><a href="https://github.com/enriikke/gatsby-gh-pages-action" class="link-underline">gatsby-gh-pages-action</a></p>
</li>
<li>
<p class="para"><a href="https://kontent.ai/blog/how-to-trigger-github-action-using-webhook-with-no-code" class="link-underline">how-to-trigger-github-action-using-webhook-with-no-code</a></p>
</li>
<li>
<p class="para"><a href="https://brunoscheufler.com/blog/2021-10-17-updating-notion-pages-on-a-schedule-with-github-actions#scheduling-it" class="link-underline">Updating Notion Pages on a Schedule with GitHub Actions</a></p>
</li>
</ul></section></article><div class="pagination"><div class="index-module--pagination--iWu7S"><a class="index-module--paginationItem--ZgXus" rel="prev" href="/blogs/《架构修炼师之道》摘录02-设计思维基础/"><div class="index-module--circle--E91Mj index-module--light--x7OKG"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" style="transform:rotate(90deg);width:14px;height:14px"><path stroke="currentColor" stroke-width="1.4" d="M12 3v17M19 13l-7 7-7-7"></path></svg></div> <span class="index-module--paginationItemPrev--WtmXw">《架构修炼师之道》摘录02-设计思维基础</span></a><span></span><a class="index-module--paginationItem--ZgXus" rel="next" href="/blogs/《架构修炼师之道》摘录01-成为软件架构师/"><span class="index-module--paginationItemNext--nbZSQ">《架构修炼师之道》摘录01-成为软件架构师</span> <div class="index-module--circle--E91Mj index-module--light--x7OKG"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" style="transform:rotate(-90deg);width:14px;height:14px"><path stroke="currentColor" stroke-width="1.4" d="M12 3v17M19 13l-7 7-7-7"></path></svg></div></a></div></div></section></section></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-50406624-2', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blogs/博客又搬家了/";window.___webpackCompilationHash="136b2da2e8b1b23964e3";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-4f3032a41e5c476c8f46.js"],"app":["/app-a99b6c2ab16d3879fc0c.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-adf2066c282d2a1fad9e.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-7b09644532f5bd1dcc54.js"],"component---src-pages-archives-tsx":["/component---src-pages-archives-tsx-ddc2637e6d877197950e.js"],"component---src-pages-categories-tsx":["/component---src-pages-categories-tsx-b5a2e4d86066d30e963f.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-7e0f083acf9cb537d315.js"],"component---src-pages-labs-tsx":["/component---src-pages-labs-tsx-73eba9758ec10d8f2e57.js"],"component---src-templates-blog-list-tsx":["/component---src-templates-blog-list-tsx-7eb438f670f1bdf1603e.js"],"component---src-templates-blog-post-tsx":["/component---src-templates-blog-post-tsx-0fc1c644d51a3ff081f8.js"],"component---src-templates-categories-js":["/component---src-templates-categories-js-7fe7e84267b6c1ad1f7e.js"]};/*]]>*/</script><script src="/polyfill-4f3032a41e5c476c8f46.js" nomodule=""></script><script src="/component---src-templates-blog-post-tsx-0fc1c644d51a3ff081f8.js" async=""></script><script src="/commons-904b92826443395b7905.js" async=""></script><script src="/app-a99b6c2ab16d3879fc0c.js" async=""></script><script src="/framework-4b7b24ae718e4140a055.js" async=""></script><script src="/webpack-runtime-adf1335a44885cfac931.js" async=""></script></body></html>