{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/blogs/2020-03-21-使用 CSS Variable 实现主题色切换/",
    "result": {"data":{"site":{"siteMetadata":{"title":"张小伦的网络日志","description":"欢迎来到张小伦的网络日志 \n\t\t一个记录生活，分享心得的博客","menu":[{"id":"home","name":"首页","url":"/"},{"id":"blog","name":"博文","url":"/blogs"},{"id":"category","name":"分类","url":"/categories"},{"id":"archive","name":"归档","url":"/archives"},{"id":"lab","name":"实验室","url":"/labs"},{"id":"about","name":"关于我","url":"/about"}]}},"markdownRemark":{"id":"130f2871-cd90-59b6-9b30-fb7d03267f70","html":"<p class=\"para\">最近在写自己的小项目时，想试试 CSS variables，于是便有了此文。</p>\n<p class=\"para\">之前也使用过 Sass，Less 之类的预处理器。因为 node-sass 的安装和编译频繁出现失败的问题，所以一直都是 Less 用的比较多。当我回想日常使用Less的经历时，却发现似乎除了变量，嵌套和函数这三个特性，其他功能基本上没有太多使用。这不由得让我陷入了思考：我在自己的项目中是否还需要使用预处理器？</p>\n<p class=\"para\">在我的日常使用习惯中，变量主要是为了解决重复地显式书写变量名或者值，降低设计修改带来的维护成本。而嵌套和函数的使用则主要是为了服务 <a href=\"http://getbem.com/introduction/\" class=\"link-underline\">BEM</a> 规范的，自动编译出长长的 ClassName。</p>\n<p class=\"para\">使用 <code>CSS Module</code> 的方案，可以实现类似BEM规范的精髓，使用 <code>CSS custom properties</code> 提供变量的能力。二者结合使用原生CSS就能满足我的需求，无需额外的工具。</p>\n<p class=\"para\"><code>CSS Module</code> 也具备类似预处理器的声明变量的能力，但是它的语法在 <code>.css</code> 文件中是不支持的，在我看来算是一种侵入式拓展，至于预处理器提供的 loop、condition 等能力，我相信未来的 CSS 也会支持。</p>\n<p class=\"para\"><strong>CSS 变量(CSS variables)</strong> 是 <strong>CSS自定义属性的(CSS custom properties)<strong>的别称，有时候也会称之为</strong>级联变量(cascading variabels)</strong>。使用规定的语法定义和获取变量的值</p>\n<h2 class=\"heading subtitle heading\" id=\"基本用法\" style=\"position:relative;\"><a href=\"#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95\" aria-label=\"基本用法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>基本用法</h2>\n<p class=\"para\">使用<code>--</code>作为属性名的前缀，属性值可以是任何有效的CSS值。比如<code>--main-bg-color</code>，然后通过<code>var()</code>来获取对应的属性值。不过要注意的是，自定义属性名是大小写敏感的。</p>\n<deckgo-highlight-code language=\"css\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">element {\n  --main-bg-color: brown;\n  background-color: var(--main-bg-color);\n}</code>\n        </deckgo-highlight-code>\n<p class=\"para\">同时要清楚的明白：自定义属性也只是属性，仅用于匹配当前选择器及其子孙，这和通常的CSS是一样的。所以我觉得叫做<code>CSS变量</code>还是没有<code>CSS自定义属性</code>更加贴切。</p>\n<h2 class=\"heading subtitle heading\" id=\"作用域\" style=\"position:relative;\"><a href=\"#%E4%BD%9C%E7%94%A8%E5%9F%9F\" aria-label=\"作用域 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>作用域</h2>\n<p class=\"para\">JavaScript 中变量是有作用域的，要么是全局作用域，要么就是局部作用域。CSS 变量亦是如此。</p>\n<p class=\"para\">在CSS变量中，<code>:root</code> 选择器允许你定位到 DOM 中的最顶级元素或文档树。这种方式声明的变量就属于具有全局作用域的变量。</p>\n<deckgo-highlight-code language=\"css\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">:root {\n  --main-color: red;\n}\n\n.a {\n  color: var(--main-color);\n}</code>\n        </deckgo-highlight-code>\n<p class=\"para\">可以在选择器中，声明相同的自定义属性</p>\n<deckgo-highlight-code language=\"css\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">:root {\n  --main-color: red;\n}\n\n.a {\n  --main-color: green;\n  color: var(--main-color);  //最后是 color: green;\n}</code>\n        </deckgo-highlight-code>\n<h2 class=\"heading subtitle heading\" id=\"继承\" style=\"position:relative;\"><a href=\"#%E7%BB%A7%E6%89%BF\" aria-label=\"继承 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>继承</h2>\n<p class=\"para\">同普通的 CSS 属性一样，自定义属性也会被继承，如果在一个给定的元素上，没有为这个自定义属性设置值，在其父元素上的值会被使用。看一下下面的例子</p>\n<deckgo-highlight-code language=\"css\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">div {\n  --color: red;\n}\n\ndiv.test {\n  color: var(--color)\n}\n\ndiv.ew {\n  color: var(--color)\n}</code>\n        </deckgo-highlight-code>\n<p class=\"para\"><code>.test</code>和<code>.ew</code> 都会继承来自<code>div</code>的<code>--color</code>。甚至可以在HTML的style标签来设置。</p>\n<deckgo-highlight-code language=\"html\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">&lt;!--HTML--&gt;\n&lt;html style=&quot;--color: red&quot;&gt;</code>\n        </deckgo-highlight-code>\n<deckgo-highlight-code language=\"css\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">body {\n  color: var(--color)；\n}</code>\n        </deckgo-highlight-code>\n<h2 class=\"heading subtitle heading\" id=\"有效值\" style=\"position:relative;\"><a href=\"#%E6%9C%89%E6%95%88%E5%80%BC\" aria-label=\"有效值 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>有效值</h2>\n<p class=\"para\">在普通的 CSS 属性中，如果属性值是非法值，将会被忽略，如果有继承值，则使用继承值。</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 614px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a22b5370a77c5f9a37c177348af51ccc/9453e/Xnip2020-10-05_12-48-44.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.148936170212764%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAQACBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe3pQmP/xAAVEAEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAQABBQJp/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhABAQEAAAAAAAAAAAAAAAAAMRAg/9oACAEBAAY/AmGP/8QAGRAAAgMBAAAAAAAAAAAAAAAAABEBICFR/9oACAEBAAE/IVDGcZlD/9oADAMBAAIAAwAAABBUz//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/EGf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAABBAMBAAAAAAAAAAAAAAARAAEhURAxQZH/2gAIAQEAAT8QaFvTNKFpdCFni4z/AP/Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Xnip2020-10-05_12-48-44.jpg\"\n        title=\"Xnip2020-10-05_12-48-44.jpg\"\n        src=\"/static/a22b5370a77c5f9a37c177348af51ccc/9453e/Xnip2020-10-05_12-48-44.jpg\"\n        srcset=\"/static/a22b5370a77c5f9a37c177348af51ccc/bc01b/Xnip2020-10-05_12-48-44.jpg 188w,\n/static/a22b5370a77c5f9a37c177348af51ccc/bf173/Xnip2020-10-05_12-48-44.jpg 375w,\n/static/a22b5370a77c5f9a37c177348af51ccc/9453e/Xnip2020-10-05_12-48-44.jpg 614w\"\n        sizes=\"(max-width: 614px) 100vw, 614px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"para\">当自定义属性值被解析，浏览器不知道它们什么时候会被使用，所以必须认为这些值都是有效的。但是无效的var()会使用继承值或者初始值代替。在Chrome的调试工具中可以看到，即使是无效的var(), 也不会出现被划去的横线</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 612px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b1478f267e2644ee982de2ecfbe05f07/a18e1/Xnip2020-10-05_12-54-59.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.191489361702125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3aFB/8QAFRABAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQEAAQUCj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABgQAAMBAQAAAAAAAAAAAAAAAAABEVEx/9oACAEBAAE/IaXCaiLD/9oADAMBAAIAAwAAABBwD//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/EGf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAQUAAAAAAAAAAAAAAAABACFBYYGx/9oACAEBAAE/ECwG2BSh2Yk//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Xnip2020-10-05_12-54-59.jpg\"\n        title=\"Xnip2020-10-05_12-54-59.jpg\"\n        src=\"/static/b1478f267e2644ee982de2ecfbe05f07/a18e1/Xnip2020-10-05_12-54-59.jpg\"\n        srcset=\"/static/b1478f267e2644ee982de2ecfbe05f07/bc01b/Xnip2020-10-05_12-54-59.jpg 188w,\n/static/b1478f267e2644ee982de2ecfbe05f07/bf173/Xnip2020-10-05_12-54-59.jpg 375w,\n/static/b1478f267e2644ee982de2ecfbe05f07/a18e1/Xnip2020-10-05_12-54-59.jpg 612w\"\n        sizes=\"(max-width: 612px) 100vw, 612px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"para\">来看一下下面这个例子</p>\n<deckgo-highlight-code language=\"css\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">:root { --text-color: 16px; } \np { color: blue; } \np { color: var(--text-color); }</code>\n        </deckgo-highlight-code>\n<p class=\"para\">浏览器将 <code>--text-color</code> 的值替换给了 <code>var(--text-color)</code>，但是 <code>16px</code> 并不是 <code>color</code> 的合法属性值。代换之后，该属性不会产生任何作用。浏览器会执行如下两个步骤：</p>\n<ol>\n<li>检查属性 <code>color</code> 是否为继承属性。是，但是 <p> 没有任何父元素定义了 color 属性。转到2。</li>\n<li>将该值设置为它的默认初始值，浏览器中 <code>color</code>的默认值是 <code>black</code>。</li>\n</ol>\n<blockquote class=\"quote\">\n<p class=\"para\">从这里也可以看出来区别于预处理器的编译，<code>CSS custom properties</code> 属于运行时。</p>\n</blockquote>\n<h2 class=\"heading subtitle heading\" id=\"通过-JavaScript-操作自定义属性\" style=\"position:relative;\"><a href=\"#%E9%80%9A%E8%BF%87-JavaScript-%E6%93%8D%E4%BD%9C%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7\" aria-label=\"通过 JavaScript 操作自定义属性 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>通过 JavaScript 操作自定义属性</h2>\n<p class=\"para\">在这里你会发现，通过JavaScript操作自定义属性和操作CSS样式根本就是一回事。这样再次表名，这的确就是“自定义CSS属性”。</p>\n<deckgo-highlight-code language=\"js\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">// 获取一个 Dom 节点上的 CSS 变量\nelement.style.getPropertyValue(&quot;--my-var&quot;);\n\n// 获取任意 Dom 节点上的 CSS 变量\ngetComputedStyle(element).getPropertyValue(&quot;--my-var&quot;);\n\n// 修改一个 Dom 节点上的 CSS 变量\nelement.style.setProperty(&quot;--my-var&quot;, jsVar + 4);</code>\n        </deckgo-highlight-code>\n<h2 class=\"heading subtitle heading\" id=\"实现主题色\" style=\"position:relative;\"><a href=\"#%E5%AE%9E%E7%8E%B0%E4%B8%BB%E9%A2%98%E8%89%B2\" aria-label=\"实现主题色 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>实现主题色</h2>\n<p class=\"para\">通过简单的代码实例来阐述说明主题色实现的方式。demo来自<a href=\"https://www.sitepoint.com/css-theming-custom-properties-javascript/\" class=\"link-underline\">Advanced CSS Theming with Custom Properties and JavaScript</a>。</p>\n<p class=\"para\">首先在全局下定义自定义属性</p>\n<deckgo-highlight-code language=\"css\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">:root {\n  --main-hue: 350;\n}</code>\n        </deckgo-highlight-code>\n<p class=\"para\">然后定义页面样式</p>\n<deckgo-highlight-code language=\"css\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">nav{\n  background: hsl(var(--main-hue) , 50%, 50%);\n  padding: 1.3rem;\n  color: hsl(var(--main-hue), 50%, 10%);\n}</code>\n        </deckgo-highlight-code>\n<p class=\"para\">如果要指定除红色以外的其他颜色，则只需将相应的值指定给 —main-hue 即可。</p>\n<deckgo-highlight-code language=\"css\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">:root{\n  --red-hue: 360;\n  --blue-hue: 240;\n  --green-hue: 120;\n  --main-hue : var(--red-hue);\n}</code>\n        </deckgo-highlight-code>\n<p class=\"para\">为红色，蓝色和绿色定义了三个自定义属性，然后将 <code>--red-hue</code> 变量分配给 <code>--main-hue</code>。</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/10b850ec6128d6e2c08992b164ce38e0/90712/1535599018different-themes.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.97872340425532%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAB3UlEQVQoz2XO626iQBTAcR6savum4htU94OXSivaVRtuwzQCIoiAXGZUrnLbfthQa9d0k19OTk7yzwzRGjYfqPtbd81RozG+b01uDe8ao0brpflwiyCNDml02rv2P6ROdrZtUr9h6CT5P0LeSfbBQpV/hT0nVCTLtg4YZ98CxzVX8sGycoy/EYPpgFo+L+CCZmnV03CJNdXv96djajmfv08mrKb6B5R5G50eDJbUGCyW7GTqbfQCHQnq99OMf8Xl8Vh8sXfxeDSfTgFGFUbVARUHVATWfv404uhZgXGFcIGOdQwjEUaiEILL4ub+zshFEEExBkIoiBGAsevmZ8OKAIzgeygIoQhDEZau9xVfejVR/RJZZgbFGMIQwpAH4VpNPD9LTTMUQQTApU/UdeEigg8EPuT4QPiOjW3GCYHAR58zUJQYoTzdbgNeuOJiRSl9n2ACljuxfCAwAXv99vmNObFMXbJMIILIcbKzYZwY5sQwEcfVE8Bi7xJSvJITWU1UOZG18xYVaG+XkhQrSrpWE1lONlqKvTKz9vFqlSpKoq4TSUo1vX7ZKu0fbPPjqvpUL7llleZPRNfp9tzHl5Sa/ZldDPvH3qPzq+c9j9NX+uPiOOjb9bWbUlQ1oy/+An+DTrPcVCdLAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1535599018different-themes.png\"\n        title=\"1535599018different-themes.png\"\n        src=\"/static/10b850ec6128d6e2c08992b164ce38e0/1d69c/1535599018different-themes.png\"\n        srcset=\"/static/10b850ec6128d6e2c08992b164ce38e0/4dcb9/1535599018different-themes.png 188w,\n/static/10b850ec6128d6e2c08992b164ce38e0/5ff7e/1535599018different-themes.png 375w,\n/static/10b850ec6128d6e2c08992b164ce38e0/1d69c/1535599018different-themes.png 750w,\n/static/10b850ec6128d6e2c08992b164ce38e0/90712/1535599018different-themes.png 882w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"para\">只需要通过一小段代码就可以动态修改主题色</p>\n<deckgo-highlight-code language=\"js\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">document.documentElement.style.setProperty(&#39;--main-hue&#39;, 240);</code>\n        </deckgo-highlight-code>\n<h2 class=\"heading subtitle heading\" id=\"实现暗黑模式\" style=\"position:relative;\"><a href=\"#%E5%AE%9E%E7%8E%B0%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F\" aria-label=\"实现暗黑模式 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>实现暗黑模式</h2>\n<p class=\"para\">通过这种方式，可以很方便实现现在很流行的暗黑模式。利用作用域特性，定义全局变量和局部变量，默认是浅色模式</p>\n<deckgo-highlight-code language=\"css\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">:root {\n  --links: #ee9ca7;\n  --text: #333;\n  --background-color: #fff;\n}\n\n.darkmode {\n  --text: #fff;\n  --links: #66e387;\n  --background-color: #333;\n}\n\nbody {\n  font-size: 1.2rem;\n  background: var(--background-color);\n  color: var(--text);\n}\n\na {\n  color: var(--links);\n}</code>\n        </deckgo-highlight-code>\n<p class=\"para\">通过 JavaSctipt 来控制 ClassName，下面是伪代码，假设有一个触发操作的按钮</p>\n<deckgo-highlight-code language=\"ts\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">const button: HTMLButtonElement = document.querySelector(&quot;.color-switch&quot;);\nbutton.addEventListener(&quot;click&quot;, function() {\n  const body: HTMLBodyElement = document.querySelector(&quot;body&quot;);\n  \n  body.classList.toggle(&quot;darkmode&quot;);\n  if (button) {\n    button.innerText = body.classList.contains(&quot;lightmode&quot;) ? &quot;Dark&quot; : &quot;Light&quot;;\n  }\n});</code>\n        </deckgo-highlight-code>\n<h2 class=\"heading subtitle heading\" id=\"兼容性\" style=\"position:relative;\"><a href=\"#%E5%85%BC%E5%AE%B9%E6%80%A7\" aria-label=\"兼容性 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>兼容性</h2>\n<p class=\"para\">浏览器支持性非常好，基本所有的现代浏览器都支持良好（本文写作时已超过 95.29%）</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/78d14d5d372cdef2d1cfa0e9343c04a7/5f298/Xnip2020-10-05_13-09-19.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.851063829787233%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAEAA//aAAwDAQACEAMQAAAB23GbIN//xAAXEAADAQAAAAAAAAAAAAAAAAAAARIT/9oACAEBAAEFAtHVlH//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAVEAEBAAAAAAAAAAAAAAAAAAAREP/aAAgBAQAGPwIL/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERIUGR/9oACAEBAAE/IWqBem6FPD//2gAMAwEAAgADAAAAEIAP/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAwEBPxDXsuN//8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/EBbb/8QAGhABAAMAAwAAAAAAAAAAAAAAAQARITFhof/aAAgBAQABPxC1Q3iv3JdKbOO4QuP/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Xnip2020-10-05_13-09-19.jpg\"\n        title=\"Xnip2020-10-05_13-09-19.jpg\"\n        src=\"/static/78d14d5d372cdef2d1cfa0e9343c04a7/acb04/Xnip2020-10-05_13-09-19.jpg\"\n        srcset=\"/static/78d14d5d372cdef2d1cfa0e9343c04a7/bc01b/Xnip2020-10-05_13-09-19.jpg 188w,\n/static/78d14d5d372cdef2d1cfa0e9343c04a7/bf173/Xnip2020-10-05_13-09-19.jpg 375w,\n/static/78d14d5d372cdef2d1cfa0e9343c04a7/acb04/Xnip2020-10-05_13-09-19.jpg 750w,\n/static/78d14d5d372cdef2d1cfa0e9343c04a7/ec605/Xnip2020-10-05_13-09-19.jpg 1125w,\n/static/78d14d5d372cdef2d1cfa0e9343c04a7/c58a3/Xnip2020-10-05_13-09-19.jpg 1500w,\n/static/78d14d5d372cdef2d1cfa0e9343c04a7/5f298/Xnip2020-10-05_13-09-19.jpg 2742w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 class=\"heading subtitle heading\" id=\"总结\" style=\"position:relative;\"><a href=\"#%E6%80%BB%E7%BB%93\" aria-label=\"总结 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>总结</h2>\n<p class=\"para\">下面开始技术总结</p>\n<ol>\n<li><code>CSS custom properties</code> 允许开发人员自定义CSS属性及对应的属性值</li>\n<li>自定义属性有作用域之分，<code>：root</code>可以定义全局范围的自定义属性，在选择器内部的自定义属性只能子元素下作用</li>\n<li>自定义属性也遵循CSS属性的继承和级联规则</li>\n<li>如果自定义属性的值无效，将会使用继承值或者默认值</li>\n<li>可以用JavaSctript操作自定义属性，就像操作CSS原生属性一样</li>\n</ol>","tableOfContents":"<ul>\n<li><a href=\"#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95\">基本用法</a></li>\n<li><a href=\"#%E4%BD%9C%E7%94%A8%E5%9F%9F\">作用域</a></li>\n<li><a href=\"#%E7%BB%A7%E6%89%BF\">继承</a></li>\n<li><a href=\"#%E6%9C%89%E6%95%88%E5%80%BC\">有效值</a></li>\n<li><a href=\"#%E9%80%9A%E8%BF%87-javascript-%E6%93%8D%E4%BD%9C%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7\">通过 JavaScript 操作自定义属性</a></li>\n<li><a href=\"#%E5%AE%9E%E7%8E%B0%E4%B8%BB%E9%A2%98%E8%89%B2\">实现主题色</a></li>\n<li><a href=\"#%E5%AE%9E%E7%8E%B0%E6%9A%97%E9%BB%91%E6%A8%A1%E5%BC%8F\">实现暗黑模式</a></li>\n<li><a href=\"#%E5%85%BC%E5%AE%B9%E6%80%A7\">兼容性</a></li>\n<li><a href=\"#%E6%80%BB%E7%BB%93\">总结</a></li>\n</ul>","headings":[{"id":"基本用法","depth":2,"value":"基本用法"},{"id":"作用域","depth":2,"value":"作用域"},{"id":"继承","depth":2,"value":"继承"},{"id":"有效值","depth":2,"value":"有效值"},{"id":"通过-JavaScript-操作自定义属性","depth":2,"value":"通过 JavaScript 操作自定义属性"},{"id":"实现主题色","depth":2,"value":"实现主题色"},{"id":"实现暗黑模式","depth":2,"value":"实现暗黑模式"},{"id":"兼容性","depth":2,"value":"兼容性"},{"id":"总结","depth":2,"value":"总结"}],"frontmatter":{"title":"使用 CSS variables 实现主题色切换","date":"2020-03-21","cover":null,"description":null,"categories":["技术研究"],"tags":["CSS"]}},"previous":{"fields":{"slug":"/blogs/2020-05-05-在滴滴的这几年：组件库的设计和开发/"},"frontmatter":{"title":"在滴滴的这几年：组件库的设计和开发"}},"next":{"fields":{"slug":"/blogs/2020-01-16-为Promise增加abort方法/"},"frontmatter":{"title":"为Promise增加abort方法","tags":[],"categories":[],"status":null}}},"pageContext":{"id":"130f2871-cd90-59b6-9b30-fb7d03267f70","previousPostId":"ac6266b3-a63f-5908-b80e-a8d665821b8d","nextPostId":"f8fdb2ed-e1d8-5fd3-ad61-01d72a338c44"}},
    "staticQueryHashes": ["2841359383"]}