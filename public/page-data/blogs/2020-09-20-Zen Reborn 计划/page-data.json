{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/blogs/2020-09-20-Zen Reborn 计划/",
    "result": {"data":{"site":{"siteMetadata":{"title":"张小伦的网络日志","description":"欢迎来到张小伦的网络日志 \n\t\t一个记录生活，分享心得的博客","menu":[{"id":"home","name":"首页","url":"/"},{"id":"blog","name":"博文","url":"/blogs"},{"id":"category","name":"分类","url":"/categories"},{"id":"archive","name":"归档","url":"/archives"},{"id":"lab","name":"实验室","url":"/labs"},{"id":"about","name":"关于我","url":"/about"}]}},"markdownRemark":{"id":"a79495c0-5ad6-5bee-b668-712d1b7b73b4","html":"<h2 class=\"heading subtitle heading\" id=\"背景\" style=\"position:relative;\"><a href=\"#%E8%83%8C%E6%99%AF\" aria-label=\"背景 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>背景</h2>\n<p class=\"para\">作为业务组件库，zen在多个租车B端系统中被广泛使用。</p>\n<p class=\"para\">zen在提高租车B端的研发效率的同时，保证B端系统的UI和交互的一致性。</p>\n<p class=\"para\">但是当初的维护人员已离职或者转岗，没有专人(团队)维护</p>\n<ul>\n<li>最新版本为v1.3.12，发布时间2020-12-04 11:15:24，发布人在职。小修补</li>\n<li>最大版本号v2.2.98，发布时间2019-08-28 11:21:43，发布人已离职。找不到该版本的信息</li>\n<li>v1.3.5 发布时间 2019-11-19 11:13:56 ，v1.3.6发布时间 2020-08-25 19:38:05。间隔了将近一年。同样找不到v1.3.5的记录</li>\n</ul>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/321231bb5b0e95a37cf08553555ac963/fe720/Untitled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.765957446808514%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXElEQVQoz4WRy0vDQBDG82d78ubFgx4ET1IQiiIKWltPhSKoB9EqHpqbTSFJ82qzebRN9pF+Mtuaqj04MLuzu7O/+XbHcNqvcO76GHc/oEoBsuVy+a9/5/01o7/TxPvuOcz9FmRerHa3837ZT+gWsJgvkLIESioopSClRFVV+gKtKZZC1Hu1OqU2XlV1IYMLgTAK4fkeppMJXMdBHMcakjAGxhgc2waLYwjOwcsSlVLbqtdQg5ccURTB9zxMogjeeiZgmiTIs0yfZWkKJaUG5rM54l4X03YL4cUZ0qeHGmpwzhEEAcIwXCmKY4xdVwPICUqqR6ORfoEuNJshvL5CcNqAe3SIaed2A6R/IkW2bdcqreEQlmVpQOD7OjYHA12IgCzLMb9pYNE8QHF5jPnJHhad5urJNBCUlNIf0QWKy7LUDRLrdVEUOqbmCKnAzT74yz342yP4cw/y09TAL72OX+eOu7pPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./images/Untitled.png\"\n        title=\"./images/Untitled.png\"\n        src=\"/static/321231bb5b0e95a37cf08553555ac963/1d69c/Untitled.png\"\n        srcset=\"/static/321231bb5b0e95a37cf08553555ac963/4dcb9/Untitled.png 188w,\n/static/321231bb5b0e95a37cf08553555ac963/5ff7e/Untitled.png 375w,\n/static/321231bb5b0e95a37cf08553555ac963/1d69c/Untitled.png 750w,\n/static/321231bb5b0e95a37cf08553555ac963/78797/Untitled.png 1125w,\n/static/321231bb5b0e95a37cf08553555ac963/fe720/Untitled.png 1448w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 class=\"heading subtitle heading\" id=\"当前现状\" style=\"position:relative;\"><a href=\"#%E5%BD%93%E5%89%8D%E7%8E%B0%E7%8A%B6\" aria-label=\"当前现状 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>当前现状</h2>\n<p class=\"para\"><img src=\"./images/Untitled%201.png\" alt=\"./images/Untitled%201.png\"></p>\n<p class=\"para\"><strong>组件使用情况</strong></p>\n<p class=\"para\"><img src=\"./images/Untitled%202.png\" alt=\"./images/Untitled%202.png\"></p>\n<p class=\"para\">所以，这件事情是有必要做的</p>\n<h2 class=\"heading subtitle heading\" id=\"改进计划\" style=\"position:relative;\"><a href=\"#%E6%94%B9%E8%BF%9B%E8%AE%A1%E5%88%92\" aria-label=\"改进计划 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>改进计划</h2>\n<p class=\"para\"><img src=\"./images/Untitled%203.png\" alt=\"./images/Untitled%203.png\"></p>\n<p class=\"para\">上图是第一次分析时得出的初步计划，在仔细研读zen现有的代码和设计的时候遇到了下面几个比较头疼的点</p>\n<ol>\n<li>React版本16.3.0和Antd3.x，有很多API提示将要废弃。在此基础上改造收益不高</li>\n<li>工程化相关的配置比较老旧和冗余，改造成当前流行的最佳实践成本较大</li>\n<li>新增业务组件必须使用老版本的react和antd，开发人员积极性不高</li>\n</ol>\n<p class=\"para\"><img src=\"./images/Untitled%202.png\" alt=\"./images/Untitled%202.png\"></p>\n<p class=\"para\">所以决定</p>\n<ol>\n<li>原有版本继续维护，只做bugfix</li>\n<li>开启新项目zen-next(zen2.0)</li>\n</ol>\n<p class=\"para\"><em><strong>新老项目并存必然会带来一些问题</strong></em></p>\n<ol>\n<li>老项目新旧版本如何共存？</li>\n<li>新老版本依赖了不同版本的react和antD，是否会存在冲突或者冗余，如何解决？</li>\n</ol>\n<p class=\"para\">首先明确一点，新老版本共存这个事实将会客观存在，并且将存在一段时间。子应用中可以使用新版本，老系统可以暂时不用care。随着子应用的逐个拆分，老系统最后将会边成一个架子。当不在有项目依赖老版本zen时，zen就可以退出历史舞台。</p>\n<p class=\"para\">关于依赖的问题，对于组件库来说，第三方依赖不应该被包含在产出物中，尤其是React,antd之类的超级依赖，(一些小体积的辅助工具可忽略，比如按需引入的lodash函数)。所以zen-next的产出物会将不包含react antd。目前老系统和zen-pc-bc 都是将二者打包在产出物中，所以不会存在冲突。</p>\n<p class=\"para\"><img src=\"./images/Untitled%204.png\" alt=\"./images/Untitled%204.png\"></p>\n<h2 class=\"heading subtitle heading\" id=\"Zen-next\" style=\"position:relative;\"><a href=\"#Zen-next\" aria-label=\"Zen next permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Zen-next</h2>\n<p class=\"para\">首先对zen-next的提出几个要求：</p>\n<ol>\n<li>详细的使用文档</li>\n<li>兼容的API设计</li>\n<li>标准的协作共建</li>\n<li>舒适的研发体验</li>\n</ol>\n<p class=\"para\">接下来按照下面几个步骤来一步步开始和完善zen-next</p>\n<ol>\n<li>制定规范</li>\n<li>确定需要改造和迁移的组件</li>\n<li>确定API</li>\n<li>评审</li>\n<li>开始开发</li>\n<li>重复步骤2</li>\n</ol>\n<h2 class=\"heading subtitle heading\" id=\"项目规范\" style=\"position:relative;\"><a href=\"#%E9%A1%B9%E7%9B%AE%E8%A7%84%E8%8C%83\" aria-label=\"项目规范 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>项目规范</h2>\n<h3 class=\"heading\" id=\"项目目录\" style=\"position:relative;\"><a href=\"#%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95\" aria-label=\"项目目录 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>项目目录</h3>\n<deckgo-highlight-code language=\"jsx\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">|-- docs 项目文档\n|-- scripts 工程化相关脚本\n|----| webpack webpack配置目录\n|----| commander 项目命令集合\n|-- src 组件库源码\n|----| _style 公共样式目录\n|----| _hepler 工具类函数\n|----| components 组件目录\n|----| components 组件目录\n|------| Component1 \n|--------| demo demo目录，一个文件为一个demo用例\n|----------| start.mdx\n|----------| ...\n|--------| index.tsx 组件入口\n|--------| index.css 组件样式\n|--------| index.mdx 文档页面\n|--------| ... (其他按需添加)\n|-- lib 输出产出物目录\n|-- site 组件库文档</code>\n        </deckgo-highlight-code>\n<h3 class=\"heading\" id=\"组件规范\" style=\"position:relative;\"><a href=\"#%E7%BB%84%E4%BB%B6%E8%A7%84%E8%8C%83\" aria-label=\"组件规范 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>组件规范</h3>\n<deckgo-highlight-code language=\"bash\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">| Component1 \n|--| demo demo目录，一个文件为一个demo用例\n|----| start.mdx\n|----| ...\n|--| index.tsx 组件入口\n|--| index.css 组件样式\n|--| index.mdx 文档页面\n|--| ... (其他按需添加)</code>\n        </deckgo-highlight-code>\n<p class=\"para\">具体细节可查询项目 <code>docs</code> 目录</p>\n<h3 class=\"heading\" id=\"代码规范\" style=\"position:relative;\"><a href=\"#%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83\" aria-label=\"代码规范 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>代码规范</h3>\n<p class=\"para\"><strong>ESLint 和 PrettierJS</strong></p>\n<p class=\"para\">为了减少对某些约束的无意义的讨论，采用社区推荐的规范。项目使用 React 和 TypeScript开发，所以使用 <strong><a href=\"https://www.npmjs.com/package/@typescript-eslint/parser\" class=\"link-underline\">@typescript/parser</a></strong> 作为parser，配合 <strong><a href=\"https://www.npmjs.com/package/@typescript-eslint/parser\" class=\"link-underline\">eslint-plugin-react</a></strong> ，再加上少许定制。</p>\n<p class=\"para\">而在代码格式方面则使用<strong>PrettierJS</strong>推荐的配置。</p>\n<h3 class=\"heading\" id=\"提交规范\" style=\"position:relative;\"><a href=\"#%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83\" aria-label=\"提交规范 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>提交规范</h3>\n<p class=\"para\">毫无疑问，采用推荐的 <strong>约定式提交。</strong> 为提交信息增加人机可读含义的规范。</p>\n<h3 class=\"heading\" id=\"为什么使用约定式提交\" style=\"position:relative;\"><a href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E7%BA%A6%E5%AE%9A%E5%BC%8F%E6%8F%90%E4%BA%A4\" aria-label=\"为什么使用约定式提交 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>为什么使用约定式提交</h3>\n<ul>\n<li>自动化生成 CHANGELOG。</li>\n<li>基于提交的类型，自动决定语义化的版本变更。</li>\n<li>向其他人传达变化的性质。</li>\n<li>触发构建和部署流程。</li>\n<li>让人们探索一个更加结构化的提交历史，以便降低对你的项目做出贡献的难度。</li>\n</ul>\n<p class=\"para\">具体细节可查询 <a href=\"https://www.conventionalcommits.org/zh-hans/v1.0.0-beta.4/\" class=\"link-underline\">约定式提交</a> 。</p>\n<p class=\"para\">在约定式提交的基础上，使用 <a href=\"https://github.com/conventional-changelog/standard-version\" class=\"link-underline\">standard-version</a> 可以按照 <code>semver</code>标准来实现自动更新版本号和更新 <code>ChangeLog.md</code>。</p>\n<h2 class=\"heading subtitle heading\" id=\"工程化\" style=\"position:relative;\"><a href=\"#%E5%B7%A5%E7%A8%8B%E5%8C%96\" aria-label=\"工程化 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>工程化</h2>\n<p class=\"para\"><img src=\"./images/Untitled%205.png\" alt=\"./images/Untitled%205.png\"></p>\n<p class=\"para\">完善的工程化设计，能够很好的帮助开发。</p>\n<h2 class=\"heading subtitle heading\" id=\"高优迁移的组件\" style=\"position:relative;\"><a href=\"#%E9%AB%98%E4%BC%98%E8%BF%81%E7%A7%BB%E7%9A%84%E7%BB%84%E4%BB%B6\" aria-label=\"高优迁移的组件 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>高优迁移的组件</h2>\n<p class=\"para\">使用工具 <a href=\"https://www.npmjs.com/package/madge\" class=\"link-underline\">madge</a> 分析zen的代码依赖，得到下图</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7010dead7e3b32e01ad96706211e070b/eff5b/graph.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.808510638297875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSklEQVQoz12S6W4DIQyE9xE4fQGbQ1WUqu//fFPZu0mV/hiBEP6wZ9hKKfiv1jp6J4ho7FtrqLWBRcDMyDkj5xRrSin02m9++SiobznMzxxOTNgvO1gYYgY1O+91lFxOeH5DNyL6gDnIOwtowDvUFJ06uHVQbRhj4PH8jo5zSvFwQHPCJiJR7IVzLdgwEAuYGEsNUxWXYTBmKPfQugw8f+5Q4+jsAJZjZFUFs4KIoSYQ5bjgnvmZP6g641FiBomgus8OOcd0MRM6taNDZovi69eOudvbD5db4r75ajYwxjz9FNRWzyAPq0ot2Dy1WsvhYakffpZawUS4rQVlxmUZrruhdU+czrrjB7zS3v4n/AH0lImw1g0ihjEn5tqjGx/Pfd/3K2zMv5RbqzGqTUFKGbnk97iu17/0Lo7wONJ1uFtwvz9wvX2FDcQdv/OE4NFL0ilHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./images/graph.png\"\n        title=\"./images/graph.png\"\n        src=\"/static/7010dead7e3b32e01ad96706211e070b/1d69c/graph.png\"\n        srcset=\"/static/7010dead7e3b32e01ad96706211e070b/4dcb9/graph.png 188w,\n/static/7010dead7e3b32e01ad96706211e070b/5ff7e/graph.png 375w,\n/static/7010dead7e3b32e01ad96706211e070b/1d69c/graph.png 750w,\n/static/7010dead7e3b32e01ad96706211e070b/78797/graph.png 1125w,\n/static/7010dead7e3b32e01ad96706211e070b/aa440/graph.png 1500w,\n/static/7010dead7e3b32e01ad96706211e070b/eff5b/graph.png 4530w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"para\">结合前面提到的组件使用情况统计</p>\n<p class=\"para\"><img src=\"./images/Untitled%202.png\" alt=\"./images/Untitled%202.png\"></p>\n<p class=\"para\">同时对每个组件单独进行依赖分析可以发现最为复杂的是：BaseForm</p>\n<p class=\"para\"><img src=\"./images/Untitled%206.png\" alt=\"./images/Untitled%206.png\"></p>\n<p class=\"para\">BaseForm是ListFilter、FormModal、EditForm的下层依赖，而BaseForm又依赖了以下这些组件</p>\n<ol>\n<li>SmartSelect</li>\n<li>BankCardInput</li>\n<li>VerificationCode</li>\n<li>CitySelect</li>\n<li>CompanySelect</li>\n<li>SearchInput</li>\n<li>EditTable</li>\n<li>BetweenTextInput</li>\n<li>CarVariantMultiSelect</li>\n<li>CarVariantSelect</li>\n<li>CityPanelSelect</li>\n<li>PhotoBox</li>\n<li>Card</li>\n<li>SmartInput</li>\n<li>AsyncButton</li>\n<li>EditTag</li>\n</ol>\n<p class=\"para\">所以重构迁移过程中首先以这些为主</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%E8%83%8C%E6%99%AF\">背景</a></p>\n</li>\n<li>\n<p><a href=\"#%E5%BD%93%E5%89%8D%E7%8E%B0%E7%8A%B6\">当前现状</a></p>\n</li>\n<li>\n<p><a href=\"#%E6%94%B9%E8%BF%9B%E8%AE%A1%E5%88%92\">改进计划</a></p>\n</li>\n<li>\n<p><a href=\"#zen-next\">Zen-next</a></p>\n</li>\n<li>\n<p><a href=\"#%E9%A1%B9%E7%9B%AE%E8%A7%84%E8%8C%83\">项目规范</a></p>\n<ul>\n<li><a href=\"#%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95\">项目目录</a></li>\n<li><a href=\"#%E7%BB%84%E4%BB%B6%E8%A7%84%E8%8C%83\">组件规范</a></li>\n<li><a href=\"#%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83\">代码规范</a></li>\n<li><a href=\"#%E6%8F%90%E4%BA%A4%E8%A7%84%E8%8C%83\">提交规范</a></li>\n<li><a href=\"#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8%E7%BA%A6%E5%AE%9A%E5%BC%8F%E6%8F%90%E4%BA%A4\">为什么使用约定式提交</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E5%B7%A5%E7%A8%8B%E5%8C%96\">工程化</a></p>\n</li>\n<li>\n<p><a href=\"#%E9%AB%98%E4%BC%98%E8%BF%81%E7%A7%BB%E7%9A%84%E7%BB%84%E4%BB%B6\">高优迁移的组件</a></p>\n</li>\n</ul>","headings":[{"id":"背景","depth":2,"value":"背景"},{"id":"当前现状","depth":2,"value":"当前现状"},{"id":"改进计划","depth":2,"value":"改进计划"},{"id":"Zen-next","depth":2,"value":"Zen-next"},{"id":"项目规范","depth":2,"value":"项目规范"},{"id":"项目目录","depth":3,"value":"项目目录"},{"id":"组件规范","depth":3,"value":"组件规范"},{"id":"代码规范","depth":3,"value":"代码规范"},{"id":"提交规范","depth":3,"value":"提交规范"},{"id":"为什么使用约定式提交","depth":3,"value":"为什么使用约定式提交"},{"id":"工程化","depth":2,"value":"工程化"},{"id":"高优迁移的组件","depth":2,"value":"高优迁移的组件"}],"frontmatter":{"title":"Zen Reborn 计划","date":"2020-09-20","cover":null,"description":null,"categories":["解决方案"],"tags":[]}},"previous":{"fields":{"slug":"/blogs/2020-10-14-在滴滴的这几年：基于Git的平台文档解决方案/"},"frontmatter":{"title":"在滴滴的这几年：基于Git的平台文档解决方案"}},"next":{"fields":{"slug":"/blogs/2020-06-14-在滴滴的这几年：基于 Node.js 的私有云 Web 管控系统/"},"frontmatter":{"title":"在滴滴的这几年：基于 Node.js 的私有云 Web 管控系统","tags":[],"categories":["解决方案"],"status":null}}},"pageContext":{"id":"a79495c0-5ad6-5bee-b668-712d1b7b73b4","previousPostId":"e5df3770-a63b-5c02-8918-75d0e4d225d6","nextPostId":"2991f25e-9b6e-5e57-b532-547f4e64cd88"}},
    "staticQueryHashes": ["2841359383"]}