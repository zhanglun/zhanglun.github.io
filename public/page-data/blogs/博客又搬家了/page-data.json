{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/blogs/博客又搬家了/",
    "result": {"data":{"site":{"siteMetadata":{"title":"张小伦的网络日志","description":"欢迎来到张小伦的网络日志 \n\t\t一个记录生活，分享心得的博客","menu":[{"id":"home","name":"首页","url":"/"},{"id":"blog","name":"博文","url":"/blogs"},{"id":"category","name":"分类","url":"/categories"},{"id":"archive","name":"归档","url":"/archives"},{"id":"lab","name":"实验室","url":"/labs"},{"id":"about","name":"关于我","url":"/about"}]}},"markdownRemark":{"id":"552c58ef-9446-50b2-bc5a-f6e9bd5cd03f","html":"<p class=\"para\">不知不觉，从14年到现在，自己的博客已经维护了8年了。虽然文章写的不多，质量也参差不齐，但是热情还是在的。</p>\n<p class=\"para\">之前因为Hexo构建速度慢的问题，我将构建工具迁移到了Hugo生态。到目前为止，运行了小一年。但是本质上来说，除了更换了主题之外，其他并无太多差别。之所以说没有太多差别，原因在于Hexo和Hugo。它们都是静态网页生成器，使用Markdown管理内容，在编译阶段，将内容的信息提取之后，利用模板引擎输出网页。在我看来，这就像吃饭的时候，使用竹筷子还是木筷子一样。</p>\n<p class=\"para\">这看起来也挺好，但是对我而言还是有几个不满意的地方：</p>\n<ul>\n<li>\n<p class=\"para\">内容创作不连贯。使用git管理博客依赖环境配置，无法随时随地写文章。而我平时喜欢使用笔记软件整理资料，写好之后需要转入git仓库，存在着一种割裂感。</p>\n</li>\n<li>\n<p class=\"para\">博客定制性差。想自定义必须学习其数据格式和对应的模板语言，而学习的收益太低</p>\n</li>\n</ul>\n<p class=\"para\">有没有一种方式，可以实现随时随地写文章，随时随地发布呢？答案是：有！那就是<strong>Notion</strong>和<strong>Gatsby</strong>。</p>\n<h2 class=\"heading subtitle heading\" id=\"Notion-和-Gatsby\" style=\"position:relative;\"><a href=\"#Notion-%E5%92%8C-Gatsby\" aria-label=\"Notion 和 Gatsby permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Notion 和 Gatsby</h2>\n<h3 class=\"heading\" id=\"Notion\" style=\"position:relative;\"><a href=\"#Notion\" aria-label=\"Notion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Notion</h3>\n<p class=\"para\">Notion这款工具我已经用了一段时间了。对我来说，是目前使用最舒服的笔记工具了。简单的界面，强大的功能，多平台兼容。同时Notion 提供了开发API，而这就是我最需要的。</p>\n<p class=\"para\">将Notion的API和Github Actions 结合，把Notion中的内容转换成博客，以实现随时书写，随时发布的能力。</p>\n<h3 class=\"heading\" id=\"Gatsby\" style=\"position:relative;\"><a href=\"#Gatsby\" aria-label=\"Gatsby permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatsby</h3>\n<p class=\"para\">Gatsby.js 起初只是一个基于 React 开发的一个框架，用于帮助开发者构建快速的网站或者 apps。通过 GraphQL 处理数据来源，然后输出作为网站的数据，再通过 HTML、CSS、React 将数据展示出来。现在衍生出来一个围绕 Gatsby 的构建，预览和部署网站的云平台。下图是Gatbsby的工作原理</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/390d1c4b8d3cc6c7c330576ae78bf713/60b3a/eb55a3e89e03e681.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.36170212765958%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBElEQVQ4y11Ti27bMAz0/39duwfWFdnaJmlT52FbkvWgROkG0nawjQAh+0SRpyPVxcyYfMacCm4zYZgJggVimJDhiUGl6vfgCeMaW7jqOviMKWSNz1zRSYJdP+P1GvDtaPB0crg5gg0ZP09WC9iY8XKZ8ePDKnYcgmK9TXjcj3g6WYyeNGnXWoVzMyZjQSkhZ4JgtTXEGBGT/DegNWQiEGWIlcK6l2JErYxcCmqt6JgZ+8M7XvcHBUrOCCGglOWgsVbxViumySiWUkSMAcwFm0nMmrCilIJIGTYQvGhpAz4uo2o0OQ/jI1wgXCenMcfzgMknuLiciVQgxORW3VYhc0MqFU2qtQWThuzOHoch4jQlnAyhN2lhtKgA4oqQ+c60E33kOtIhqTinpaq4dPZ98OhNxMVG9Cbg6tJ936esZ2RVWYRhrQ2Us4pdmHUcJHmpDXOICDEhEWkDxGcfULhpnDiviXjTUGj+fnnDw5fv8CHcqaeUQERrR4u6mGDS/f/t3hRhmPMiqjaIGcM4LuOyauVDxOy9iq56F4ZzTidBMGXIa8KNrqx21ez5ZHRQKRfV6HCb8XZxui8HRdvdp8Wv3sIE0kRbju5v2jYWfSkPe4OzTaql+P4W8Pzp9CWIXR3hcW/w9Wj0uYq1f7q8XkXesKeiLjMo15F3vOCs2BYn3+JbkS3PH4mr9JcvuQLNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"eb55a3e89e03e681\"\n        title=\"eb55a3e89e03e681\"\n        src=\"/static/390d1c4b8d3cc6c7c330576ae78bf713/1d69c/eb55a3e89e03e681.png\"\n        srcset=\"/static/390d1c4b8d3cc6c7c330576ae78bf713/4dcb9/eb55a3e89e03e681.png 188w,\n/static/390d1c4b8d3cc6c7c330576ae78bf713/5ff7e/eb55a3e89e03e681.png 375w,\n/static/390d1c4b8d3cc6c7c330576ae78bf713/1d69c/eb55a3e89e03e681.png 750w,\n/static/390d1c4b8d3cc6c7c330576ae78bf713/78797/eb55a3e89e03e681.png 1125w,\n/static/390d1c4b8d3cc6c7c330576ae78bf713/60b3a/eb55a3e89e03e681.png 1179w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 class=\"heading subtitle heading\" id=\"重新定义博客工作流\" style=\"position:relative;\"><a href=\"#%E9%87%8D%E6%96%B0%E5%AE%9A%E4%B9%89%E5%8D%9A%E5%AE%A2%E5%B7%A5%E4%BD%9C%E6%B5%81\" aria-label=\"重新定义博客工作流 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>重新定义博客工作流</h2>\n<p class=\"para\">现在博客创建和发布的流程如下</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/96475e5f93be2c0fef68b1dcb3234932/7bf07/a457a9a8d7d5363c.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.319148936170215%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzklEQVQoz0VT2ZKbMBD0/39T3vO6L6mkyl5g7fIBAd23BJ2aAW9ETUmipVFPt3RqrYFiXVdQ27YNKSXEGOGc/Q5rLbz3HM45WGuOuUMIgdfnnHGiRI/HA0opjOMIIQSDMQcIO2OSLw7lBXxwyCnDeAXpFix6hrALTFRMgg46EaNhGHC/39F1HW63G5TSKGuCyxbDbcB5OPNYOwVrHGY1wRWLy3DBJCb4alFK2RMSw2mamC41Kp+AUjO0V3y6DhLaS/6HDUg1wkTNGDE3QSGXzBJwQh8Cn0DJaq1cMoGkmzEaxux6LcvCVSipIBZx4IYJEM4aUhJgRaVkh0EkA8W7vYe0iSQhraWU3ybyt21s7Km2FU9NSRuwrai1MUNyjpw0FMTSGjaODCSMkpsDJ6bEcme4AT864OMJhAa0WuB9QK4JOig2YNYTa0gul1zY5b9qhLSCg9alnHYNUSOuT4WfZw9vHSqLG5BbhE0W3VeH/tojlIBFztBKYxIv/Ln8xufXJ/pbj5d8oLV6XBs9Yn38wiauwNwjJ7rQHqVlPpmcJBdt1CitsG4he57baGCChg2ay2WGVDIrePRvl9+vJcTAEak/tNtfy66bdf9fEO35B0JMT+6G9QK9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"a457a9a8d7d5363c\"\n        title=\"a457a9a8d7d5363c\"\n        src=\"/static/96475e5f93be2c0fef68b1dcb3234932/1d69c/a457a9a8d7d5363c.png\"\n        srcset=\"/static/96475e5f93be2c0fef68b1dcb3234932/4dcb9/a457a9a8d7d5363c.png 188w,\n/static/96475e5f93be2c0fef68b1dcb3234932/5ff7e/a457a9a8d7d5363c.png 375w,\n/static/96475e5f93be2c0fef68b1dcb3234932/1d69c/a457a9a8d7d5363c.png 750w,\n/static/96475e5f93be2c0fef68b1dcb3234932/78797/a457a9a8d7d5363c.png 1125w,\n/static/96475e5f93be2c0fef68b1dcb3234932/7bf07/a457a9a8d7d5363c.png 1128w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"para\">而结合Notion API之后，发布的流程变为：</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/98c95fbf4ba90546583cdfb2c09cc308/5f652/a5b25383d42aed53.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.59574468085106%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXElEQVQoz6VSi2rDMAzM//9bWGFspdCQZKzO04/YcR5OmhtSCcsGG4wZhCXbOp9OisZxRFmW2LYN67rifr//y6K+73G9XjnYQb8DH8/mecY8PWwaJxChaZrY6E1ETpqmkFLy5U9rB3e9he4llGvYyLeDQecMlmVBRCB5njO6MQZN08B7j2EYeHfOwVrLzGiproXyEsYbPJ+f0egGbrKolMCyrIjo8eVyQdu2zDKOYwZWSuF0OkFrjbqukWUZxE3gJt7RDRrS1ngrMhivmKGxBmEOD4ZCCP6d2JCexJIaRSBVVfE9aU0aS91Ce4nGVDgnL6hNBTt2aHWNEAIiKoUSiB2BHJtx1I7jDdBWQfkGpRJ4eo2RlykkxzesVDLpRCUTux1g7+hx3/1h8HDewvoOzncwTqPrDVzvPptSFAWD7Ym/jQ0lsYWFNQvh4dMZjw0BJknyp+HdtqO/fRnsD6jDBVcT5z9KAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"a5b25383d42aed53\"\n        title=\"a5b25383d42aed53\"\n        src=\"/static/98c95fbf4ba90546583cdfb2c09cc308/1d69c/a5b25383d42aed53.png\"\n        srcset=\"/static/98c95fbf4ba90546583cdfb2c09cc308/4dcb9/a5b25383d42aed53.png 188w,\n/static/98c95fbf4ba90546583cdfb2c09cc308/5ff7e/a5b25383d42aed53.png 375w,\n/static/98c95fbf4ba90546583cdfb2c09cc308/1d69c/a5b25383d42aed53.png 750w,\n/static/98c95fbf4ba90546583cdfb2c09cc308/78797/a5b25383d42aed53.png 1125w,\n/static/98c95fbf4ba90546583cdfb2c09cc308/5f652/a5b25383d42aed53.png 1302w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 class=\"heading subtitle heading\" id=\"连接Gatsby和Notion\" style=\"position:relative;\"><a href=\"#%E8%BF%9E%E6%8E%A5Gatsby%E5%92%8CNotion\" aria-label=\"连接Gatsby和Notion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>连接Gatsby和Notion</h2>\n<h3 class=\"heading\" id=\"01-使用Gatsby创建网站\" style=\"position:relative;\"><a href=\"#01-%E4%BD%BF%E7%94%A8Gatsby%E5%88%9B%E5%BB%BA%E7%BD%91%E7%AB%99\" aria-label=\"01 使用Gatsby创建网站 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>01 使用Gatsby创建网站</h3>\n<p class=\"para\">如果是第一次使用，建议先通读一次<a href=\"https://www.gatsbyjs.com/docs/tutorial/\" class=\"link-underline\">官方文档</a>， 然后选择 <a href=\"https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog/\" class=\"link-underline\">gatsby-starter-blog</a> 这个模板开始搭建自己的博客。具体的搭建细节，我就不在这里赘述了。能看到这篇文章的人应该都能搞定的把？</p>\n<h3 class=\"heading\" id=\"02-创建Notion-数据库\" style=\"position:relative;\"><a href=\"#02-%E5%88%9B%E5%BB%BANotion-%E6%95%B0%E6%8D%AE%E5%BA%93\" aria-label=\"02 创建Notion 数据库 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>02 创建Notion 数据库</h3>\n<p class=\"para\">在自己的workspace中创建新建一个数据库类型的Page。视图类型选择Table会更加直观。下图是我的database的截图：</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a5b65dac435680399830cfe743a57995/c5394/26cedee27e109502.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.95744680851064%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRUlEQVQoz3VS2W4DIQzk/7+pX9HtNqnyUjXKAclesIs5DFPBJlGqtpaMJSwPM2ME2Rnj0MEYAz1NGIYe0zjCe48SOedH/hfPHaHUGZu2QdO84mO7QfvWoG2bCnwHfAzmjJTSr4qc0FHE3gQIM8+w1v7JgJkRmZGYkctguYsRzhFCCFWFK0oy470jvOw1xKwH9N0VRIQYYwUpWeADOUwnBXIeswugmOA4wYeA8r7VCtaom+T1FEwXKHmElBLG6NVLrYu+CrQ/njBah8/LCGkcrsQYzQxPDmpS6ExXgYr0lDPE1B9xOHxBKVWXcvemxLIs2G13lflzxLgy1P1XzeflCVoGdNcL+r6HlGc4524CMrzzUAdVa/GZzIBI88MarSWMVjfAlYjgYGHtUj0sQ3c2pcmJQWTBHGvfLwbsV69LUnBw8ef3+gZcDm4KI0x+HgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"26cedee27e109502\"\n        title=\"26cedee27e109502\"\n        src=\"/static/a5b65dac435680399830cfe743a57995/1d69c/26cedee27e109502.png\"\n        srcset=\"/static/a5b65dac435680399830cfe743a57995/4dcb9/26cedee27e109502.png 188w,\n/static/a5b65dac435680399830cfe743a57995/5ff7e/26cedee27e109502.png 375w,\n/static/a5b65dac435680399830cfe743a57995/1d69c/26cedee27e109502.png 750w,\n/static/a5b65dac435680399830cfe743a57995/78797/26cedee27e109502.png 1125w,\n/static/a5b65dac435680399830cfe743a57995/aa440/26cedee27e109502.png 1500w,\n/static/a5b65dac435680399830cfe743a57995/c5394/26cedee27e109502.png 1535w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"para\">你可以按需设置自己需要的字段，也可以参考我的。</p>\n<ul>\n<li>\n<p class=\"para\">title: 文章标题</p>\n</li>\n<li>\n<p class=\"para\">categorise: 文章分类</p>\n<ul>\n<li>\n<p class=\"para\">域 业务领域</p>\n</li>\n<li>\n<p class=\"para\">术 解决方案</p>\n</li>\n<li>\n<p class=\"para\">技 技术研究</p>\n</li>\n<li>\n<p class=\"para\">阵 技术应用</p>\n</li>\n<li>\n<p class=\"para\">法 手段方法</p>\n</li>\n<li>\n<p class=\"para\">理 理论学习</p>\n</li>\n<li>\n<p class=\"para\">器 工具使用</p>\n</li>\n<li>\n<p class=\"para\">杂 杂七杂八</p>\n</li>\n</ul>\n</li>\n<li>\n<p class=\"para\">tags：文章标签</p>\n</li>\n<li>\n<p class=\"para\">date：发布时间</p>\n</li>\n<li>\n<p class=\"para\">status: 文章状态</p>\n<ul>\n<li>\n<p class=\"para\">working: 未完成</p>\n</li>\n<li>\n<p class=\"para\">publish: 已发布</p>\n</li>\n<li>\n<p class=\"para\">draft: 草稿</p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 class=\"heading\" id=\"03-创建API-Intergation\" style=\"position:relative;\"><a href=\"#03-%E5%88%9B%E5%BB%BAAPI-Intergation\" aria-label=\"03 创建API Intergation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>03 创建API Intergation</h3>\n<p class=\"para\">首先，前往 <a href=\"https://www.notion.so/my-integrations\" class=\"link-underline\">Notion 开发平台</a>创建自己的API Intergation，拿到整个流程中最为关键的secret，具体步骤可以参考<a href=\"https://developers.notion.com/docs/getting-started#getting-started\" class=\"link-underline\">这里</a>。</p>\n<p class=\"para\"><img src=\"/9922e967372e985a09454f2ff7ef0442/1f5a00eb368a1275.gif\" alt=\"\"></p>\n<h3 class=\"heading\" id=\"04-关联数据库\" style=\"position:relative;\"><a href=\"#04-%E5%85%B3%E8%81%94%E6%95%B0%E6%8D%AE%E5%BA%93\" aria-label=\"04 关联数据库 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>04 关联数据库</h3>\n<p class=\"para\">当Intergation创建完毕时，还需要将其与我们的目标database关联上。如下图所示，在share中找到</p>\n<p class=\"para\"><img src=\"/6e3694fe5689e9e9c607d3025267fd83/a67eb58c664caa4f.gif\" alt=\"\"></p>\n<p class=\"para\">关联完毕之后，就可以通过 secret 和 database id 来实现对数据库的操作了。</p>\n<h3 class=\"heading\" id=\"05-使用插件连接-Gatsby-和-Notion\" style=\"position:relative;\"><a href=\"#05-%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6%E8%BF%9E%E6%8E%A5-Gatsby-%E5%92%8C-Notion\" aria-label=\"05 使用插件连接 Gatsby 和 Notion permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>05 使用插件连接 Gatsby 和 Notion</h3>\n<p class=\"para\">Gastby 的工作原理在前文已经介绍过了。我们可以选择我们喜欢的数据来源，通过插件，将数据同步至 GraphQL 数据层，之后的事情交给GatsBy就行。</p>\n<p class=\"para\">你可以自己写代码调用Notion API，也可以使用gatsby提供的插件。我选用目前排名比较靠前的 <a href=\"https://github.com/orlowdev/gatsby-source-notion-api\" class=\"link-underline\">https://github.com/orlowdev/gatsby-source-notion-api</a>。虽然作者说还在开发中，但是试用之后发现能够满足我的需求，我就不再自己花时间折腾了。</p>\n<p class=\"para\">接入的具体步骤如下，在依赖安装完毕之后，修改 <code>gatsby.config.js</code> 中的 <code>plugins</code></p>\n<deckgo-highlight-code language=\"javascript\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">plugins: [\n    ...\n    // 本地markdown文件，之前的文章\n    {\n      resolve: `gatsby-source-filesystem`,\n      options: {\n        path: `${__dirname}/content/blog`,\n        name: `blog`,\n      },\n    },\n    {\n      resolve: `gatsby-source-notion-api`,\n      options: {\n        token: `${INTEGRATION_TOKEN}`,\n        databaseId: `${DATABASE_ID}`,\n        propsToFrontmatter: true,\n        lowerTitleLevel: true,\n      },\n    },\n    ...\n  ],</code>\n        </deckgo-highlight-code>\n<p class=\"para\">我保留了之前写的 markdown 博客，放在 content/blog 目录中，新增了 notion api 的插件。这样一来，以前的文章不受影响，新写的文章都在 notion 中。部署时，两个数据源的内容一起部署。</p>\n<p class=\"para\">插件接入后，可以通过 <code>allNotion</code> 条件进行查询，这种方式可以查询到来自Notion的数据</p>\n<deckgo-highlight-code language=\"graphql\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">query {\n\tallNotion {\n\t\tedges {\n\t\t\tnode {\n\t\t\t\tid\n\t\t\t\tparent\n\t\t\t\tchildren\n\t\t\t\tinternal\n\t\t\t\ttitle\n\t\t\t\tproperties {\n\t\t\t\t\tMy_Prop_1\n\t\t\t\t\tMy_Prop_2\n\t\t\t\t}\n\t\t\t\tarchived\n\t\t\t\tcreatedAt\n\t\t\t\tupdatedAt\n\t\t\t\tmarkdown\n\t\t\t\traw\n\t\t\t}\n\t\t}\n\t}\n}</code>\n        </deckgo-highlight-code>\n<p class=\"para\">如果本地content/blog中有历史文章，可以使用 <code>allMarkdownRemark</code> 查询，他会包含所有的数据内容。</p>\n<deckgo-highlight-code language=\"graphql\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">query {\n\tallMarkdownRemark {\n\t\tedges {\n\t\t\tnode {\n\t\t\t\tfrontmatter {\n\t\t\t\t\ttitle\n\t\t\t\t}\n\t\t\t\thtml\n\t\t\t}\n\t\t}\n\t}\n}</code>\n        </deckgo-highlight-code>\n<h3 class=\"heading\" id=\"06-使用-GraphQL-Schema-Resolver-兼容数据可选\" style=\"position:relative;\"><a href=\"#06-%E4%BD%BF%E7%94%A8-GraphQL-Schema-Resolver-%E5%85%BC%E5%AE%B9%E6%95%B0%E6%8D%AE%E5%8F%AF%E9%80%89\" aria-label=\"06 使用 GraphQL Schema Resolver 兼容数据可选 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>06 使用 GraphQL Schema Resolver 兼容数据（可选）</h3>\n<p class=\"para\">通常Hugo(Hexo)中定义的tags和categories都是字符串数组。而Notion的database中我将tags和categories定义为Select类型的属性，保存的值对象，Notion 插件返回的 frontmatter中的tags和categories都是包含了id、color和name的对象数组。</p>\n<p class=\"para\">GraphQL的类型定义中，没有类似“Any”的类型，而内置的 ScalarType 和 ObjectType 又不能union，解决方案是使用<code>resolver</code>处理返回的值，将tags处理为一个字符串数组，categories处理成一个字符串。</p>\n<deckgo-highlight-code language=\"javascript\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">schema.buildObjectType({\n\t...\n\ttags: {\n    type: &quot;[String]&quot;,\n    resolve(source) {\n      return source.tags.map((t) =&gt; t.name || t);\n    } \n  },\n  categories: {\n    type: &quot;String&quot;,\n    resolve(source) {\n      return source.categories;\n    }\n  },\n  ...\n})</code>\n        </deckgo-highlight-code>\n<p class=\"para\">最后在查询时返回的数据格式如下：</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 376px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ba7bcd5a9d3d3247cde5479754027218/d38a6/b964b3845ce8b0b8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.91489361702128%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACg0lEQVQ4y2VT2XLbMAz0/39RH9uZ3k7ipK5dH0psWbdF8aZEymm2Q8pW4+QBAgkNlgtgMek6i6wWmK5z/Fjn+LpIsYprNJRDSIX4kKCzDqbtgrWdDTberYXphrPpLCb+0FmLpGS4X2b4tsrRmBbGdpBKI6tKdM7BWBuSL4DtqUfb9zBCo21tAGvbDpP2/FLvHGxOYeYJ2Oct2OwAdheD3e5BZzH4MgObxWC/U4ioRPMlAr3ZQWYUnMuR9eRCXZsWsuKQJQPflJBpA1UwqCMffE4htiU0UzDCQEQVZExCLmX8GtC6PlCWBxLYkI9r0Lt4sJs92P0BbJ4G4Na5ofRzyR6o69zY34n/VMc6AHpTXEMkBIpIaGmguYYWOvhL4y9tem0jQz/BbRShIQSnvsfp+YTTy3Pwfd/D9T36Uw/bu/cTfgMWGPoJ74sGUVpjuT9ifaixORBsE4LIW0rwlFPscoqGCTDGURTVWKZ5BRYY+gNXLf7ENaarHPOE4MN9jO+bAjsisMwaTLcFMqqgWgPCObJjBffyF8a0geUVw4sOrW9uwaC3JcSvBHpTQM0TqEUKsztCPR3DVP2k2SINJnxc6qs2TF43WNUCIq4h9nXwfsohiUjIhEA3MkzaA3tFeEk1Db0GHOs3HWROwVc52EMCvshApzuwhwPEYxWYeSHzVRHE7f/LuIbU+rrkkaHpoGsRmHjzQuaLdGBSC6iSDfGzyP2GaCJRJ1XIvRK2l44H9tvhX6e3+8CMfFoHYfut8Mzpz11gNgg9Cauoc/Z+yseajEH/qqYKmsrQK38P7H2skdBMn/1wN9a+1aFD9PgIpcwg3LBaZ/Pr5c6CvsSs/e+de7cp/wAOAr4iT9nBLgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"b964b3845ce8b0b8\"\n        title=\"b964b3845ce8b0b8\"\n        src=\"/static/ba7bcd5a9d3d3247cde5479754027218/d38a6/b964b3845ce8b0b8.png\"\n        srcset=\"/static/ba7bcd5a9d3d3247cde5479754027218/4dcb9/b964b3845ce8b0b8.png 188w,\n/static/ba7bcd5a9d3d3247cde5479754027218/5ff7e/b964b3845ce8b0b8.png 375w,\n/static/ba7bcd5a9d3d3247cde5479754027218/d38a6/b964b3845ce8b0b8.png 376w\"\n        sizes=\"(max-width: 376px) 100vw, 376px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"para\">OK，到目前为止，我们已经成功将Gatsby和Notion联系在一起。Notion的内容可以作为Gastby的数据源，输出在网站中，同时现有markdown的也能够无缝迁移。随写随发的目标，我们已经完成了一大半。</p>\n<h3 class=\"heading\" id=\"07-将Notion导出项目目录通过-source-file-system-加载\" style=\"position:relative;\"><a href=\"#07-%E5%B0%86Notion%E5%AF%BC%E5%87%BA%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E9%80%9A%E8%BF%87-source-file-system-%E5%8A%A0%E8%BD%BD\" aria-label=\"07 将Notion导出项目目录通过 source file system 加载 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>07 将Notion导出项目目录，通过 source file system 加载</h3>\n<p class=\"para\">使用了一段时间后，发现 gatsby-notion-api 有几个不太好用的地方（毕竟只是作者的实验性项目）：</p>\n<ul>\n<li>\n<p class=\"para\">无法转换Table</p>\n</li>\n<li>\n<p class=\"para\">串行请求页面导致构建时间比较长。</p>\n</li>\n<li>\n<p class=\"para\">无法缓存，导致每次都是全量构建</p>\n</li>\n</ul>\n<p class=\"para\">于是想自己写一个，使用 <a href=\"https://www.npmjs.com/package/notion-client\" class=\"link-underline\"><strong>notion-client</strong></a> 提供开箱即用的API调用，使用 <a href=\"https://github.com/souvikinator/notion-to-md\" class=\"link-underline\"><strong>notion-to-md</strong></a> 将页面转换成markdown 文件。不幸的是，Gatsby在 build 的时候总是出现莫名奇妙的错误。</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/84e78f5006fdb9e043f78c7e94981770/3c492/ea31a6dda92a6a18.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 143.61702127659575%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAAsTAAALEwEAmpwYAAADxElEQVRIx21W0XLbNhDkRzSJRAIEQJAACJCUZLm25fFLJmk/oG0yk7T//xvbuYPAULYfdo4EqeXtYe+g6u9Y42f8hL/CDgddo5c1mqaGEA2klAyl1Iq2lfyMnwsBuUYBKQWqZXQ4hAGTswiuR287ODcgpYQYRzjnIIRgtG17SyjFG1TzsiCmhGmeMc0TxjgipYi7uzscDgecTifEGDFNE7quu2YtUNf7TCwzaI0+VnnvYDsDrRTGMcBaA2M0rO2YoO/7FVprJuQsmwYNo0Zd12vGFclSrcRu9wnn8xldZ9aHJLHUMRNlyVmeXLPNJcllqI7HI5Rq15RXKYxM+npTmKRpNh+WK6p5nlge1S2EwLJD8BiGnms3DMMNaSFs6uKGLHclPBwW6FbgsCxwzqPvLZNZ3m0Ha+0bwrLTVEOqX1FF99XxeOAXDoeEx8cTUhqZsPiwkP2KcmMT+dY2JI+23bkOIVh0nV6LT7UtZO8Rbmt3I7mVki1Bvtvvd2jb8vJW6i3he2T0u+p0OnLqVLPT8Qit1aYT5I1swnsyhfhVAs6QFsi4T0+PWJaZjU0kxhheJ4MXUnq3WU293Zhss+p8voNWAp3ReHl5AdmISLOFRjY72ee1H1+DstvXDaplWXhi0AZcLhfuYaoH1bJ8neK2YwhlYGyvRSNQkZEd+85imhLIRpQlGT1PnDwYKFu6pkjZ07PynECl4RpeLk94eLjH+e7EuDw9MoJ3PMbcMHDnBO9Bg4Tuh76Hdw6e1zw3ANWbylJZ51Arzfhtt8eHfb3iYy3wsRH4QLGgyRCv5Ofy0KYMGl+jxufQ4ks0fP01GXy5xj8miz/nfhM7vh6MhmzVjfG5hp8Xh/+eE77f9/h5SfjxlPDzeca/zwt+PEZ8uw/4/lBiwrd7j39+H+GNgmxvO0kKiUqoFjZYGG9hQw/jPDof4KYJxo/YK4NamRx1iR1M10G9IRSoOqOwTAPSaLFMHss8YZ4S5inCu4H9mWFgtIZWbY5a3wyOYqHKGIUYB4xjf40Ez7ahac676B188GytchS8HbwtWqVQ0XRJaUCMfcZoEaPDvMzcMeRN8mVM2W804clOhfS14TlDGlsxWoyjxRgsQugwjtlnZGKKZGgyMp05pYf3+/3aTbvdju+vhDk7ks0IPROWfi5dQh2TTaxZPk0o21u+Xo1NhFPqOUNrNYSQPMLKcNXXDaA1ivlAk6vk7cS5StaIkaQ5Bp0pJItBGVAm1ywIRFyGb5FdQCchE/pr31LP3p7LcvVYQT7Uxc3fk+2m/A/4/y0jGFurHQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ea31a6dda92a6a18\"\n        title=\"ea31a6dda92a6a18\"\n        src=\"/static/84e78f5006fdb9e043f78c7e94981770/1d69c/ea31a6dda92a6a18.png\"\n        srcset=\"/static/84e78f5006fdb9e043f78c7e94981770/4dcb9/ea31a6dda92a6a18.png 188w,\n/static/84e78f5006fdb9e043f78c7e94981770/5ff7e/ea31a6dda92a6a18.png 375w,\n/static/84e78f5006fdb9e043f78c7e94981770/1d69c/ea31a6dda92a6a18.png 750w,\n/static/84e78f5006fdb9e043f78c7e94981770/78797/ea31a6dda92a6a18.png 1125w,\n/static/84e78f5006fdb9e043f78c7e94981770/3c492/ea31a6dda92a6a18.png 1300w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a9c1eafc214a89958596e5bb3111f295/4352a/1f39fbd8b14e8176.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 135.63829787234042%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsTAAALEwEAmpwYAAADbElEQVRIx4VV2ZLbNhDkRyQVEQAvECdBUqJWq5Xtx9hVOaqczdoP+f8f6dQMRYqS7eShCwRZbMx0zwyyL0nhnyTwtRMYtYKtFIqyQFWVqKqKUZblDUUBKSWkFFBKoigUyrJYkQ19Qh89grMwxsB7j5Q6HA57DMMA5xwT1XV9JS2YSArBpELmKJRiYkLWdR28d4gxoOsinLO8juOAlBKT0hpjvBLOPyqlmFhJOR9wXTNjWtQ1pSaQkoFS+ZrGkvI29SWSbZp3KVNETVNDiBz7/cjabQnv9PsPwjVlSrVpGk6BfljEVqxLwe++F+G3uEZIhGRGCJ4NoL21hhHCfNhCWqwO3yDYHLkGlPV9gjGa0yV3iZjISFtyfEv4mP4CpQoIoSDlknJdcWR937PDREanblPepv5oFJNKBSUkMoqICK0xXHtk0KPLP4pw1ZVMUQVULpFRvWndoKlrTNPEpizOPUbyvf2c8mwKgQubUiTdSEd63rq8iP1Iek9YQEjFyPqUYNqWiT58eI9xHFdj6DDaa63/X0OlIEnDLkbuFNLufD6z00ROeyKiUqIft2ltMbegmjWcTQnwznE/T9MBx+PETlOU/M177mN6JtABtFL09J5grb0RXi4veP/ugufTE87PJ7y7vOB8PiF4Nx9ExR4CIh3gHZy1DDrIcSAebdteu6hAVmsNUdXIywo/5eKKnNefhZqRy9uzUMjV0r83LJpmT67Gl6PD57HB62TxemjndTL4+2Dw9uTxdgp4O3q8Tg5fjxYnW+GXXPAcXNpvacHs4Bu8vgT8Phl8fon44yniz+eEvy4jfps8Pg4Gn0aHT6PFr73Bx9Rgb2bCxZCFjAlVWaANBtq1MMFCO482BNiuQ9kayLqBYmheSZpKa9QPnbOUUEZaDL1FF1uk5DH0PVKKDC6fuoamEmoabkmR75Dn+QY77HY7jpL2WVUV6CIV8YzgNWJ0oClEoBJaphCVFo26eW7KuzpcwISRCK+kIbRMmPrurtYItHfe8Uh7dHd1mQmDwTBY9L3FOFikzqDvO76cEkfaY7/fX6+IaiVj7er7AcEa0uUUIw2IhttQ63ptvUdQdAvmy61ai3ol7DrHsLZFoxseZzM0dKu5Ewi0J5IZ9arhtsAzuuXmvvU8tYnodqt9OwO3RUxk5OytuHP8CwQk8y8UIMnDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1f39fbd8b14e8176\"\n        title=\"1f39fbd8b14e8176\"\n        src=\"/static/a9c1eafc214a89958596e5bb3111f295/1d69c/1f39fbd8b14e8176.png\"\n        srcset=\"/static/a9c1eafc214a89958596e5bb3111f295/4dcb9/1f39fbd8b14e8176.png 188w,\n/static/a9c1eafc214a89958596e5bb3111f295/5ff7e/1f39fbd8b14e8176.png 375w,\n/static/a9c1eafc214a89958596e5bb3111f295/1d69c/1f39fbd8b14e8176.png 750w,\n/static/a9c1eafc214a89958596e5bb3111f295/78797/1f39fbd8b14e8176.png 1125w,\n/static/a9c1eafc214a89958596e5bb3111f295/4352a/1f39fbd8b14e8176.png 1364w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"para\">经过百般对比和调试，翻阅Gatsby的文档。最后发现可能是在CreateNode的时候传入的参数有问题，但是调试是在是太麻烦了。随着耐心的逐渐消失，我决定换个思路。构建之前，将内容下载到本地，再通过 source file system 来处理。后续还方便做缓存。具体代码在<a href=\"https://github.com/zhanglun/zhanglun.github.io/tree/master/scripts/notion\" class=\"link-underline\">这里</a>。</p>\n<p class=\"para\"><strong>2022年5月21日更新</strong></p>\n<p class=\"para\">下载到本地的方式成功运行了一两周，接下来的时间里，Github在执行Action时，不停地遇到如下图所示的错误。</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9c26f1a01a38586905846eefda3ee7e4/71c1d/24c0968f07052424.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95.2127659574468%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACaUlEQVQ4y4VUyXbaQBDkXwIW2mfXgpCQjVlMEu855ZyT/V7+/1J53QJZcrB9qNfTaKjp6prpiR9J2HyJ1eUOq8st2vUeDcWrHerVNa42B15f737w96yoUVYtpM4hjoiFxWwe48JPMAlihSg1mIUSFxFBwYsVpqHgOMxnoeB8nmhM/YQJvCDlOCJMhcGf2zu8Pj/j5fHxiAe8PDz0+esT4YnXf3894/fNgUlOOJFOglgjSjQO7Qp311cdNjvcbva4397gfnfAz/UW22WD7XLF2DctmqLqiUYVhonGPJLwohSh0AhShUBY+KlFKDMEabcmubNAYErwU14PiU5gyfNQQioN6xyMddCuRLFoYbIKfihAe+hgBq1jBTLzPVlPSB9joaCtgzIOyi0gbclmDcmoPZQHXxGS5ERoGJdB2ww6qyBNOSAiUoN5KDD1ov+MGBL3khOhYJyDywukKuM/c0U9oebfzhkxqpA2+pFiQpKcCHOUpcfxDOE58LXxj5K1y5BIwyTUv/DYQ14nuu/pZ6QjycoYaJuzKfQcT9LpQALto5cx7N+HLkepgtAWQjlIUzBi4UayqTVe8Hkfe5dTqaGMhTQ5bFEzyGk6bHx1ugO+rDAWkgnZGJn1Mt+DWuB98EoGPRSIUglpHITuCMmAkwmJdDyiKKd4zu3+LftHFwN20SISFkHSSewq72bdt4vwDV7EF5xA+Xja0IDNKjTthofoevudQYOVh+t6D2VLdpxAZlHkqlPDeTB4hhMRCeTSoNQZimyBqqg5LhcN6qpFVdZYFDWqskGZVxxzW0ImCiJW0MIiCVOE8xiRH+MfRt5WPkd7NDUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"24c0968f07052424\"\n        title=\"24c0968f07052424\"\n        src=\"/static/9c26f1a01a38586905846eefda3ee7e4/1d69c/24c0968f07052424.png\"\n        srcset=\"/static/9c26f1a01a38586905846eefda3ee7e4/4dcb9/24c0968f07052424.png 188w,\n/static/9c26f1a01a38586905846eefda3ee7e4/5ff7e/24c0968f07052424.png 375w,\n/static/9c26f1a01a38586905846eefda3ee7e4/1d69c/24c0968f07052424.png 750w,\n/static/9c26f1a01a38586905846eefda3ee7e4/78797/24c0968f07052424.png 1125w,\n/static/9c26f1a01a38586905846eefda3ee7e4/aa440/24c0968f07052424.png 1500w,\n/static/9c26f1a01a38586905846eefda3ee7e4/71c1d/24c0968f07052424.png 1536w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"para\">调试了很久，最后发现是依赖的 <a href=\"https://www.gatsbyjs.com/plugins/gatsby-remark-images-anywhere/\" class=\"link-underline\">gatsby-remark-images-anywhere</a> 所导致。这个插件会做的事情是将远程图片下载到static目录，同时修改文章中图片的引用。我也不想深究背后的问题，自己写一个脚本不是更方便么？</p>\n<h2 class=\"heading subtitle heading\" id=\"自动部署的实现\" style=\"position:relative;\"><a href=\"#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E7%9A%84%E5%AE%9E%E7%8E%B0\" aria-label=\"自动部署的实现 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>自动部署的实现</h2>\n<p class=\"para\">使用类Hugo的静态网站生成器时，自动部署的关键点在于push操作能够触发配置的CI流程。而改用Notion之后，如何触发构建和部署呢？目前我想到了两个方式：手动触发构建和定时任务。后者相比之下更加“自动化”。</p>\n<p class=\"para\">其实有一种取巧地方式：通过Chrome插件在Notion的Web页面上插入一个按钮。这个按钮点击时调用webhook触发Action。不过暂时不打算折腾这些。毕竟还有一些待完成的工作要做。考虑到我已经实现了“随时写”的目标，“随时发”倒也没有那么迫切了。所以我决定先采用定时发布的方式来解决部署的问题。</p>\n<p class=\"para\">我在Github Action的市场中找到一个已经做好的Action帮助我实现博客的编译和github page的部署，这里是它的<a href=\"https://github.com/enriikke/gatsby-gh-pages-action\" class=\"link-underline\">仓库地址</a> 。按照它的教程很快就能定制出自己的Action。我在此基础上增加了一个定时任务，每天零时的时候执行一次，暂且先当作是实现了“自动化部署”吧。</p>\n<deckgo-highlight-code language=\"yaml\" theme=\"one-dark\" line-numbers=\"true\"  >\n          <code slot=\"code\">name: Gatsby Publish\non:\n  schedule:\n    - cron: &quot;0 0 * * *&quot;\n  workflow_dispatch:\n  push:\n    branches:\n      - mast\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v1\n      - uses: enriikke/gatsby-gh-pages-action@v2\n        with:\n          access-token: ${{ secrets.gatsbyDeploy }}\n          deploy-branch: gh-pages\n          deploy-repo: gatsby-starter-blog</code>\n        </deckgo-highlight-code>\n<h2 class=\"heading subtitle heading\" id=\"其他\" style=\"position:relative;\"><a href=\"#%E5%85%B6%E4%BB%96\" aria-label=\"其他 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>其他</h2>\n<p class=\"para\">现在将Notion作为CMS的想法已经基本实现。接下来地主要工作是定制化设计和开发博客主题。目前设计的第一版已经完成了。</p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ac2a14ea463d2cf90a49c1ab8e918c7a/0d292/b73141e3ac029d53.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 144.14893617021275%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEMElEQVRIx6VVa0wcVRS+lVZoYYmuFCsWQsWSYugj1tQ/Gh8RrTFtAAW6JRYoJUVrTUiM2kT/aAiJivIImkUI0EazVki7S1WMNSpYa5vqYktjY6KNAjssuzszO7Oz7OzO7mfOhSHSWAt4kpP7Oue7Z875zh2G/5B4PI5oNIZozECM1JhVPRqFHo3xkdZGPA4jnuBz1tbRiaa2bjR39ODt9m40vWeHve84vv/xAtRgANBVRDUJekhERBWhyT4E/QIUv4CgzwM1MAXVL0AS/oTkmwJbszYPbIUVLD0PSbdtRGrWFqRnb8OdW4uwq/IQ7N19cLpccDqdcDmd6O8fgOOT43CedOLU4CAGXS585nKh3+HA2TNnwLIL7scqay5u2XAfsjY/gswNW5FTsAObNm9H/pYdePTJYhSXVcL2bA1qag/i6TIbntmzD+/3fIrOoyfw4dEBdB8bQEtHL7748luwzNxCrMzYCGvBQ8gseBCWdflYY81BiiUDGdn5yM7fhlRrFu6+92E8UV6PopIqPF5SjfpX3sGrjR/gtSY73ny3B6832dHvOg22NmcTVt1RiLTc7Uhedw/2Hz6Cjxz96Or9GF19DrTbe9HU3I7WLgec37jhOn0Og1/9gM+/PovKQ2+gqPxFFFe9hJ0Vh9HW6QAbvTiGn9y/4OfRi7gweglqSFtQaVEM4Pz5c7g8dgl6JLzg7Oq4gLErf+DX367i8pXfMT4pgF1LlUQiDl2PIhLRIUkyREmGooYQVFQEJBmaFubnhmGQ9QJfw4iBzczMIBKJcKU5Geq6jkAgAJ/Ph+npaXi9XkzPqSRJCAaDnKPEQ9PX9GfkHI1GudJ89mYz2gTfUxQFmqYhFostiMj0Mf0J9F8BCYgiIKE9iopAad/sIJovGZBaaXLSg++Gh+F2u3mU5vmSAE1RtTAvREAklSDKQRhGfPGfTEklOeU8gd07H8Pe8lLYykpQvacU+ypKYCsrRfHup7C/porTiaIkkOsChsOzPGtpfguMMSQnMaxks7o6icGSfBNWMIb1WbfD4/Fw20UBtra2cEBLugXpaavxQOF6WG9NR5olDSkpNyMv7y4IgrB4wMbGRg5ImsUYTlYkYVcem99LTU3FxMTEjQHNHA4NDWGvzYaDdQfwQl0tXq6vxZHna/Fc3QHUVFehoaGBU+mGOfwnbcyIQ5oGVZuBooURCoU4uU2OLomHNJISqCiKvN3M82USe7YrKCKKjOd3rlOWRWweZTwOjyBgeK5T6PPN6JbVKfRkeX1+eIQpCFNe+AIiIro+f+GiAPmzpOs8b6RUTVmS+EhrWZbnny9Kx6JzSMZkoKoq/H4/B6Q52S25KNeKybXE/ymKyTV6tUdGRnhR6DyxXEASWVEgeKfx1/gEJiY9vED0r1lyUSh/qqLwV5ryRoWQ5SBfEydJr1eUvwHfnd2m4C3ZbQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"b73141e3ac029d53\"\n        title=\"b73141e3ac029d53\"\n        src=\"/static/ac2a14ea463d2cf90a49c1ab8e918c7a/1d69c/b73141e3ac029d53.png\"\n        srcset=\"/static/ac2a14ea463d2cf90a49c1ab8e918c7a/4dcb9/b73141e3ac029d53.png 188w,\n/static/ac2a14ea463d2cf90a49c1ab8e918c7a/5ff7e/b73141e3ac029d53.png 375w,\n/static/ac2a14ea463d2cf90a49c1ab8e918c7a/1d69c/b73141e3ac029d53.png 750w,\n/static/ac2a14ea463d2cf90a49c1ab8e918c7a/78797/b73141e3ac029d53.png 1125w,\n/static/ac2a14ea463d2cf90a49c1ab8e918c7a/aa440/b73141e3ac029d53.png 1500w,\n/static/ac2a14ea463d2cf90a49c1ab8e918c7a/0d292/b73141e3ac029d53.png 1620w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 750px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e352024a15f187c6da3c35997fb7f00c/6a5c3/c18738a69359bbce.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.04255319148936%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADJElEQVQ4y5WTbWwUVRSGJ0b5R/ADkhpTi4AgllJMttSSiCSIpEVU0OKmCSpiW35QUDHGWCMmtlaFUkpC4481tmiR2DQQI2gwTRqa+lFjSIMbyvZru+1S2+12293uztw7s/OYuZuNGyNhvcnJvHPuPc89Z84ZbSEWQ9d1hBBEozFCoRnm5udJL1NKpBTqaZoSUwr0RBxdT5CIx5HCUD7njBQCbV/VQTaVutn2wmuUvVRF2Z5K3K+/Re3Hp+jq7mE6OEooOMLU+DB/BYYI+gcZGx7A7/My5vMSGPQSuHENX38fgWEf2lrXFjTtbrR7VrIoJ5/FD6xjSe567lu5kTXFpVTWvENjcwsnmk9z8lQLDZ81UtdwnLb2b2k/18nXZzs4+00HHk8b3d09aEVP7uCOJbncu2ojea4yluYVsCyvgNy8FeQXunh881O4SjazrfRZyt172fl8Oduf2U39yVZaWi/weWsnnq/O03T6DD9cvoL2cEEx2l05LHqwiDtz1rF0eSGPbNjE8jUbWPFoEasfe4L7H8pnbUkZu6uP4q6upaLqXWpqm9j3Rj0vH/yQ6rc/4dWaj2g99z1axSuVuLbuYsvOCoqfLufTZg9T0yECEzcJjAcZHRvHNzTKkH+CyZkok9MRbk6FCYUjHG38kv1HGjj03nEq36yjveMSGlksm+xW0rLQnJExDEOZo6VpIqRkdibEfCSsYL9e6eLn7p8wkzDS9wth3+8kbVuNWjrWMAS6YaA5L1JKtemYjc1cZI7vLl4iODFGLG5w+MBhWpoaiURNPO+76TpTR9JGzWU6zmEYmcA01LIsbBv8/gCzsxFVyuWuXq55byh93dvLwEC/0pmJ3BJomqY6PG/o6FKm/hbL2TeUDkUWiC4klBa3AxpC4NQSji9Q399L2/CfWJbg6o9fMPjbBSZD05S4Cnlu13YMU6pqsgAmiegJjnn76By5jmUKJr09hEf/YCo8Q83eF6n/4IjK/rbAzJLnYrHUBUDCMNFFyi+EgZ20s/+GqimZM+h0yDGn/7atZNJOaefyrIBpUAr2j7Yz/f8nQ/4VeCv9X8C/Af+Lip0BKyxrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"c18738a69359bbce\"\n        title=\"c18738a69359bbce\"\n        src=\"/static/e352024a15f187c6da3c35997fb7f00c/1d69c/c18738a69359bbce.png\"\n        srcset=\"/static/e352024a15f187c6da3c35997fb7f00c/4dcb9/c18738a69359bbce.png 188w,\n/static/e352024a15f187c6da3c35997fb7f00c/5ff7e/c18738a69359bbce.png 375w,\n/static/e352024a15f187c6da3c35997fb7f00c/1d69c/c18738a69359bbce.png 750w,\n/static/e352024a15f187c6da3c35997fb7f00c/78797/c18738a69359bbce.png 1125w,\n/static/e352024a15f187c6da3c35997fb7f00c/aa440/c18738a69359bbce.png 1500w,\n/static/e352024a15f187c6da3c35997fb7f00c/6a5c3/c18738a69359bbce.png 1646w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"para\">代码已经开发了一部分，维护在<a href=\"https://github.com/zhanglun/gatsby-starter-blog\" class=\"link-underline\">zhanglun/gatsby-starter-blog</a>。等完工之后，将博客迁移到这个方案。期间再研究研究，看看是否能找到更好的自动化方案。在此期间就继续慢慢感受Notion的魅力吧。</p>\n<blockquote class=\"quote\">\n<p class=\"para\">2022-04-23 更新：<br>\n网站整体的风格已经变了，欢迎访问</p>\n</blockquote>\n<h2 class=\"heading subtitle heading\" id=\"参考\" style=\"position:relative;\"><a href=\"#%E5%8F%82%E8%80%83\" aria-label=\"参考 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>参考</h2>\n<ul>\n<li>\n<p class=\"para\"><a href=\"https://arnaudvalensi.github.io/blog/making-a-blog-using-notion-gatsby-and-github-pages/\" class=\"link-underline\">Making a Blog Using Notion, Gatsby, and Github Pages</a></p>\n</li>\n<li>\n<p class=\"para\"><a href=\"https://github.com/enriikke/gatsby-gh-pages-action\" class=\"link-underline\">gatsby-gh-pages-action</a></p>\n</li>\n<li>\n<p class=\"para\"><a href=\"https://kontent.ai/blog/how-to-trigger-github-action-using-webhook-with-no-code\" class=\"link-underline\">how-to-trigger-github-action-using-webhook-with-no-code</a></p>\n</li>\n<li>\n<p class=\"para\"><a href=\"https://brunoscheufler.com/blog/2021-10-17-updating-notion-pages-on-a-schedule-with-github-actions#scheduling-it\" class=\"link-underline\">Updating Notion Pages on a Schedule with GitHub Actions</a></p>\n</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#notion-%E5%92%8C-gatsby\">Notion 和 Gatsby</a></p>\n<ul>\n<li><a href=\"#notion\">Notion</a></li>\n<li><a href=\"#gatsby\">Gatsby</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E9%87%8D%E6%96%B0%E5%AE%9A%E4%B9%89%E5%8D%9A%E5%AE%A2%E5%B7%A5%E4%BD%9C%E6%B5%81\">重新定义博客工作流</a></p>\n</li>\n<li>\n<p><a href=\"#%E8%BF%9E%E6%8E%A5gatsby%E5%92%8Cnotion\">连接Gatsby和Notion</a></p>\n<ul>\n<li><a href=\"#01-%E4%BD%BF%E7%94%A8gatsby%E5%88%9B%E5%BB%BA%E7%BD%91%E7%AB%99\">01 使用Gatsby创建网站</a></li>\n<li><a href=\"#02-%E5%88%9B%E5%BB%BAnotion-%E6%95%B0%E6%8D%AE%E5%BA%93\">02 创建Notion 数据库</a></li>\n<li><a href=\"#03-%E5%88%9B%E5%BB%BAapi-intergation\">03 创建API Intergation</a></li>\n<li><a href=\"#04-%E5%85%B3%E8%81%94%E6%95%B0%E6%8D%AE%E5%BA%93\">04 关联数据库</a></li>\n<li><a href=\"#05-%E4%BD%BF%E7%94%A8%E6%8F%92%E4%BB%B6%E8%BF%9E%E6%8E%A5-gatsby-%E5%92%8C-notion\">05 使用插件连接 Gatsby 和 Notion</a></li>\n<li><a href=\"#06-%E4%BD%BF%E7%94%A8-graphql-schema-resolver-%E5%85%BC%E5%AE%B9%E6%95%B0%E6%8D%AE%E5%8F%AF%E9%80%89\">06 使用 GraphQL Schema Resolver 兼容数据（可选）</a></li>\n<li><a href=\"#07-%E5%B0%86notion%E5%AF%BC%E5%87%BA%E9%A1%B9%E7%9B%AE%E7%9B%AE%E5%BD%95%E9%80%9A%E8%BF%87-source-file-system-%E5%8A%A0%E8%BD%BD\">07 将Notion导出项目目录，通过 source file system 加载</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2%E7%9A%84%E5%AE%9E%E7%8E%B0\">自动部署的实现</a></p>\n</li>\n<li>\n<p><a href=\"#%E5%85%B6%E4%BB%96\">其他</a></p>\n</li>\n<li>\n<p><a href=\"#%E5%8F%82%E8%80%83\">参考</a></p>\n</li>\n</ul>","headings":[{"id":"Notion-和-Gatsby","depth":2,"value":"Notion 和 Gatsby"},{"id":"Notion","depth":3,"value":"Notion"},{"id":"Gatsby","depth":3,"value":"Gatsby"},{"id":"重新定义博客工作流","depth":2,"value":"重新定义博客工作流"},{"id":"连接Gatsby和Notion","depth":2,"value":"连接Gatsby和Notion"},{"id":"01-使用Gatsby创建网站","depth":3,"value":"01 使用Gatsby创建网站"},{"id":"02-创建Notion-数据库","depth":3,"value":"02 创建Notion 数据库"},{"id":"03-创建API-Intergation","depth":3,"value":"03 创建API Intergation"},{"id":"04-关联数据库","depth":3,"value":"04 关联数据库"},{"id":"05-使用插件连接-Gatsby-和-Notion","depth":3,"value":"05 使用插件连接 Gatsby 和 Notion"},{"id":"06-使用-GraphQL-Schema-Resolver-兼容数据可选","depth":3,"value":"06 使用 GraphQL Schema Resolver 兼容数据（可选）"},{"id":"07-将Notion导出项目目录通过-source-file-system-加载","depth":3,"value":"07 将Notion导出项目目录，通过 source file system 加载"},{"id":"自动部署的实现","depth":2,"value":"自动部署的实现"},{"id":"其他","depth":2,"value":"其他"},{"id":"参考","depth":2,"value":"参考"}],"frontmatter":{"title":"博客又搬家了","date":"2021-08-19","cover":"https://images.unsplash.com/photo-1506792006437-256b665541e2?ixlib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb","description":null,"categories":["杂七杂八"],"tags":["Gatsby","Notion"]}},"previous":{"fields":{"slug":"/blogs/《架构修炼师之道》摘录02-设计思维基础/"},"frontmatter":{"title":"《架构修炼师之道》摘录02-设计思维基础"}},"next":{"fields":{"slug":"/blogs/《架构修炼师之道》摘录01-成为软件架构师/"},"frontmatter":{"title":"《架构修炼师之道》摘录01-成为软件架构师","tags":["笔记","架构"],"categories":["解决方案"],"status":"publish"}}},"pageContext":{"id":"552c58ef-9446-50b2-bc5a-f6e9bd5cd03f","previousPostId":"07fa912c-4aea-5783-844b-aaaf180bb276","nextPostId":"aa2fc259-b2c7-57af-b29c-1cf08e696aa2"}},
    "staticQueryHashes": ["2841359383"]}